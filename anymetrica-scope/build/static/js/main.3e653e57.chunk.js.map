{"version":3,"sources":["views/DashboardPage.jsx","components/MetadataCell.jsx","components/DataTable.jsx","views/CreateUserForm.jsx","constants.js","views/UsersPage.jsx","views/SignInForm.jsx","views/SignUpForm.jsx","components/CookiesConsent.jsx","views/RequestDemoForm.jsx","views/Logo.jsx","views/AnonymousPage.jsx","views/DevicesPage.jsx","views/CreateGroupForm.jsx","views/GroupsPage.jsx","views/ProfilePage.jsx","components/TimeCode.jsx","views/SoundCapturePage.jsx","components/TimeRange.jsx","views/SoundRecordsPage.jsx","views/PrivacyPolicy.jsx","views/BaseLayout.jsx","components/ErrorsBoundary.jsx","index.jsx","client.js","components/VoiceTimeline.jsx","session.js"],"names":["DashboardPage","_React$Component","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","key","value","react_default","a","createElement","card","React","Component","secondsToHumanTime","seconds","seconds2moment","format","MetadataCell","props","_this","call","state","_this$props","is_deleted","id","type","updated_ts","created_ts","deleted_ts","orientation","label","deletedCell","className","updatedCell","createdCell","statusCell","tag","color","labelCell","idCell","concat","DataTable","error","items","isLoading","selectedRowKeys","refresh","catch","console","_doDelete","asyncToGenerator","regenerator_default","mark","_callee","ids","msg","wrap","_context","prev","next","doDelete","registryClient","Delete","length","message","info","stop","_x","_handleSubmit","_callee2","records","doCreate","created","_context2","setState","sent","abrupt","objectSpread","addedRecently","toConsumableArray","t0","_x2","_handleDelete","_callee3","_this$state","idsDict","_context3","stack","fromPairs","map","filter","_ref","_refresh","_callee4","doRefresh","_context4","itemsCount","_this2","columns","form","otherProps","objectWithoutProperties","_this$state2","WrappedForm","Form","create","messageEl","es_alert","style","opacity","JSON","stringify","haveSelection","rowSelection","getCheckboxProps","record","disabled","name","onChange","e","newSelectedRowKeys","actionsMenu","affix","offsetTop","row","gutter","margin","padding","background","col","span","textAlign","marginLeft","fontWeight","fontSize","popconfirm","title","icon","onConfirm","handleDelete","placement","okText","cancelText","es_button","spin","delay","spinning","assign","onSubmit","data","handleSubmit","table","dataSource","onRow","_ref2","backgroundColor","CreateUserForm","organizations","es_form","preventDefault","validateFields","err","values","layout","maxWidth","marginTop","marginBottom","Item","input","Group","compact","getFieldDecorator","help","placeholder","width","initialValue","es_select","Option","rules","required","valuePropName","es_checkbox","date_picker","push","htmlType","ACCESS_LEVEL","AUDIO_SAMPLES","uri","process","duration","getCompareObjects","field","b","dataIndex","render","ups","up","namespace","username","join","full_name","human","f","get","date_of_birth","moment","contact","contact_type","group","organization","_ref3","domain","href","target","rel","otps","otp","otpLink","window","location","origin","otpUrlQrDataUrl","QRious","size","backgroundAlpha","toDataURL","alt","src","is_revoked","public","metadata","MetadataCell_MetadataCell","is_testing","CAN_READ","CAN_RESET","CAN_WRITE","CAN_READ_RELATIONS","UsersPage","loading","req","request","traverse_depth","two_way_discovery","types","Organization","relation_types","ADMINISTRATING","Discover","then","_ref4","entities","_doCreate","usernamePassword","sessionToken","MergeHumans","pick","year","Date","month","day","MergeContacts","CONTACT_EMAIL","email","MergeOTPs","is_not_set","organizationId","GetOrganizations","MergeUsernamePasswords","getStored","MergeSessionTokens","MergeRelations","relations","from_id","to_id","OWNS","HAVE_MEMBER","_doRefresh","allRelations","organizationsAndGroups","res","allHumansRelations","humans","Human","forEach","h","postalAddress","_ref5","UsernamePassword","OTP","Contact","HAVE_PART","discoverFrom","discoverTo","_ref6","_ref7","from","to","human_id","o","PostalAddress","Location","sort","_this3","DataTable_DataTable","rowKey","_ref8","session","SignInForm","context","ismounted","_onSubmit","errors","signInResult","signIn","password","details","_x3","fieldsError","_this$props$form","getFieldsError","showIcon","x","autoFocus","prefix","keys","some","SignUpForm","otpIsValid","_componentDidMount","checkotp","setUserNameAndPassword","_setUserNameAndPassword","result","document","getElementById","credential","_checkotp","logPassCredentialsIds","GetUsernamePasswords","submitDisabled","validateStatus","autoComplete","ACCEPTED_STORE_KEY","CookiesConsent","STORAGE","setItem","accepted","getItem","display","flexDirection","marginRight","onClick","RequestDemoForm","isOpen","RequestDemo","request_info","phone","company","whiami","stopPropagation","setOpen","modal","visible","onCancel","onOk","Logo","data-svg-id","data-svg-type","data-display-mode","data-strokewidth","data-viewbox","data-preserve-viewbox","cursor","preserveAspectRatio","data-bbox","xmlns","viewBox","role","strokeWidth","fillOpacity","strokeOpacity","d","fontFamily","letterSpacing","AnonymousPage","token","router","navigate","trigger","WrappedSignInForm","WrappedRequestDemoForm","tabs","getComponent","args","onSignIn","SignUpForm_SignUpForm","forms","es_tabs","activeKey","tab","activeTab","TabPane","Logo_Logo","Header","CookiesConsent_CookiesConsent","Content","text","obj","DEVICE_TYPES","CreateDeviceForm","omit","DevicesPage","_React$Component2","entity","device","otpID","sessionID","deviceID","MergeDevices","relation_type","foundDevices","Device","GetDevices","FormItem","CreateGroupForm","isGeographicLocation","setGeographicLocationMode","checked","setGeographicLocation","GroupsPage","foundGroups","GetGroups","MergeGroups","ProfilePage","list","bordered","renderItem","item","headStyle","TIME_CODE_STYLE","whiteSpace","alignItems","TimeCode","_momentDate$format$sp","startOf","add","split","_momentDate$format$sp2","slicedToArray","major","minor","_major$split","_major$split2","m","s","loadUriToBlob","response","blob","fetch","ok","Error","status","headers","SoundCapturePage","inputDevices","isInitializing","isRecording","audioUrl","isUploaded","isUploading","recordingStartMs","recordingEndMs","syncError","bytesOnWire","audioBlobs","mediaRecorder","finishState","devices","navigator","mediaDevices","getUserMedia","enumerateDevices","kind","activeDeviceId","deviceId","_syncToServer","audioBlob","nowMs","sendBlobToServer","media_start_ts","ms2obj","media_end_ts","URL","createObjectURL","slice","getTime","setTimeout","syncToServer","_blobToBase","Promise","resolve","reject","reader","FileReader","readAsDataURL","onloadend","onerror","_sendBlobToServer","_callee5","_toLowerCase$replace$","_toLowerCase$replace$2","media_type","content","_context5","toLowerCase","replace","blobToBase64","MergeFiles","content_type","ContentType","audio","size_bytes","hashes","code","_x4","_stopRecording","_callee6","_context6","counter","clearInterval","_toggleRecording","_callee7","handleStream","_context7","stream","now","MediaRecorder","audioBitsPerSecond","AUDIO_BYTES_PER_SECOND","AUDIO_FILE_MAX_SIZE_BYTES","addEventListener","log","Blob","se","stopRecording","start","BYTES_ON_WIRE_MAX","setInterval","video","_loadSample","_callee8","sampleUri","_context8","_x5","_this4","recDurSec","deviceNum","defaultValue","idx","toggleRecording","controls","onLoadedMetadata","_callee9","startTsMs","endTsMs","_context9","_x6","loadSample","TimeRange","secToCell","sec","dw","t","flex","parseInt","disableSpace","keyCode","SoundRecordsPage","activeId","removeEventListener","File","CREATED","_","r","VoiceTimeline","activateHandler","isActive","rowClassName","PrivacyPolicy","BaseLayout","that","assertThisInitialized","Backbone","Router","extend","routes","home/dashboard","home/users","home/groups","home/devices","home/profile","home/records","home/capture","home/sign-out","","sign-in","sign-in/:otp","sign-up","sign-up/:otp","privacy-policy","section","signUp","dashboard","checkAuth","groups","users","profile","capture","signOut","resetStorage","session_token","history","History","started","pushState","silent","_checkAuth","_getStored","SessionToken","AnonymousPage_AnonymousPage","Sider","overflow","height","position","left","menu","theme","mode","selectedKeys","DashboardPage_DashboardPage","GroupsPage_GroupsPage","DevicesPage_DevicesPage","UsersPage_UsersPage","SoundRecordsPage_SoundRecordsPage","SoundCapturePage_SoundCapturePage","ProfilePage_ProfilePage","PrivacyPolicy_PrivacyPolicy","Sentry","dsn","ErrorsBoundary","errorInfo","scope","setExtra","children","Index","ErrorsBoundary_ErrorsBoundary","BaseLayout_BaseLayout","ReactDOM","src_Index","c","RegistryGRPCClient","host","hostname","port","defaultOptions","sk","methodName","fn","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","params","options","_defaultOptions","entitiesDict","entitiesMetaDataDict","entitiesByType","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","match","BackBone","getFragment","promiseMap","getterName","ENTITY_TYPE_TO_PLURAL","RegistryService","wrapQuery","toString","DEFAULT_ZOOM","BASIC_WAVESURFER_CONFIG","zoomDebounce","container","waveColor","hideScrollbar","progressColor","cursorWidth","barWidth","barGap","cursorColor","removeMediaElementOnDestroy","autoCenter","partialRender","fillParent","scrollParent","plugins","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","zoom","events","isPlaying","canPlayPause","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__","toggle","wavesurfer","skipBackward","MS_IN_SECOND","skipForward","all","loadVadEvents","currentOnKeyDownFn","onKeyDown","_loadVadEvents","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","vadResults","EntityType","VadResult","isEmpty","waveform","spectrogram","nextProps","nextContext","pause","toggleScroll","minPxPerSec","playPause","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","Math","ceil","miniMapHeight","MINIMAP_HEIGHT_PX","contentOverlay","react__WEBPACK_IMPORTED_MODULE_9___default","antd__WEBPACK_IMPORTED_MODULE_12__","regions","_Users_ilyakutukov_projects_anymetrica_scope_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","obj2seconds","start_ts","end","end_ts","drag","resize","loop","domId","ref","WaveSurfer","Regions","dragSelection","MiniMap","Buffer","disableDragSelection","on","pixelRatio","updateInterval","progress","getCurrentTime","play","loadBlob","antd__WEBPACK_IMPORTED_MODULE_13__","shape","antd__WEBPACK_IMPORTED_MODULE_14__","vertical","onAfterChange","zoomValue","floor","log2","slider","included","userSelect","marks","step","dots","min","max","v","pow","tipFormatter","i","val","isEdgeLabel","indexOf","isCurrentLabel","getSliderParams","newZoom","defaultProps","isStorageAvailable","storage","removeItem","DOMException","preferSessionStorage","undefined","enableFallback","sessionStorage","warn","localStorage","getStorage","discoverResult","discoverIds","credentialEntities","currentCredential","username_password","GetSessionTokens"],"mappings":"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","file":"static/js/main.3e653e57.chunk.js","sourcesContent":["/* @flow */\nimport React from 'react';\nimport { Card } from 'antd';\n\nexport class DashboardPage extends React.Component {\n  // constructor(props) {\n  //   super(props);\n  //   this.state = {};\n  // }\n\n  render() {\n    return (<Card>Dashboard</Card>);\n  }\n}\n","/* @flow */\nimport { seconds2moment } from 'anymetrica-utils';\nimport React from 'react';\nimport { Tag } from 'antd';\n\nexport const secondsToHumanTime = seconds => (\n  seconds ? seconds2moment(seconds).format('YYYY-MM-DD HH:MM:ss') : 'N/A'\n);\n\nexport class MetadataCell extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const {\n      is_deleted,\n      id,\n      type,\n      updated_ts,\n      created_ts,\n      deleted_ts,\n      orientation,\n      label,\n    } = this.props;\n    const deletedCell = is_deleted ? (\n      <div className=\"metadata-cell\">\n        <span className=\"timestamp-name\">\n            deleted:\n        </span>\n        <span>\n          {secondsToHumanTime(deleted_ts)}\n        </span>\n      </div>\n    ) : null;\n\n    const updatedCell = updated_ts ? (\n      <div className=\"metadata-cell\">\n        <span className=\"timestamp-name\">\n            updated:\n        </span>\n        <span>\n          {secondsToHumanTime(updated_ts)}\n        </span>\n      </div>\n    ) : null;\n\n    const createdCell = created_ts ? (\n      <div className=\"metadata-cell\">\n        <span className=\"timestamp-name\">\n            created:\n        </span>\n        <span>\n          {secondsToHumanTime(created_ts)}\n        </span>\n      </div>\n    ) : null;\n\n    const statusCell = (\n      <div className=\"metadata-cell\">\n        <Tag color=\"#108ee9\">{type}</Tag>\n        {is_deleted ? (<Tag color=\"#a0a0a0\">Deactivated</Tag>) : (\n          <Tag color=\"#0ecc2e\">Active</Tag>)}\n      </div>);\n\n    const labelCell = (\n      <div className=\"metadata-cell\">\n        <span className=\"bold\">{label}</span>\n      </div>);\n\n    const idCell = (<div className=\"id metadata-cell\">{id}</div>);\n\n    return (\n      <div className={`metadata ${orientation}`}>\n        {statusCell}\n        {labelCell}\n        {idCell}\n        {deletedCell}\n        {updatedCell}\n        {createdCell}\n      </div>\n    );\n  }\n}\n","/* @flow */\nimport fromPairs from 'lodash.frompairs';\n\nimport React from 'react';\nimport {\n  Affix,\n  Alert,\n  Button,\n  Card,\n  Col,\n  Form,\n  Icon,\n  message,\n  Popconfirm,\n  Row,\n  Spin,\n  Table,\n} from 'antd';\nimport { registryClient } from '../client';\nimport './DataTable.css';\n\ntype StateType = {\n  error: string,\n  items: Array<string>,\n  isLoading: boolean,\n  selectedRowKeys: Array<number>\n}\n\ntype PropsType = {\n  doDelete: ?(ids: Array<string>) => Promise<any>,\n  doRefresh: () => Promise<Array<Object>>,\n  doCreate: (records: Array<Object>)=> Promise<any>,\n  columns: Array<Object>,\n}\n\nexport class DataTable extends React.Component<PropsType, StateType> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      items: [],\n      isLoading: false,\n      selectedRowKeys: [],\n    };\n  }\n\n  componentDidMount() {\n    // Pre-fetch\n    this.refresh().catch(console.error);\n  }\n\n  async doDelete(ids: Array<string>): Promise<any> {\n    await (this.props.doDelete || registryClient.Delete)({ ids });\n    const msg = `${(ids.length === 1) ? '1 record was' : `${ids.length} records were`} deleted successfully`;\n    message.info(\n      <div>\n        <div>{msg}</div>\n        <div>\n          If it result of operator mistake, please, contact support service to recover deleted data.\n        </div>\n      </div>,\n    );\n  }\n\n  async handleSubmit(records) {\n    const { doCreate } = this.props;\n    const { items } = this.state;\n\n    this.setState({ isLoading: true });\n    try {\n      const created = await doCreate(records);\n      if (!created) {\n        this.setState({ error: 'Empty entity creation result', isLoading: false });\n        return;\n      }\n      if (created.error) {\n        this.setState({ error: created.error, isLoading: false });\n        return;\n      }\n      this.setState({\n        items: [\n          {\n            ...created,\n            addedRecently: true,\n          },\n          ...items,\n        ],\n        isLoading: false,\n      });\n      await this.refresh();\n    } catch (e) {\n      console.error(e);\n      this.setState({ error: e.message, isLoading: false });\n    }\n  }\n\n  async handleDelete() {\n    const { items, selectedRowKeys } = this.state;\n\n    this.setState({ isLoading: true });\n    try {\n      await this.doDelete(selectedRowKeys);\n    } catch (e) {\n      console.error(e);\n      this.setState({ error: `${e.message} ${e.stack}`, isLoading: false });\n    }\n    const idsDict = fromPairs((selectedRowKeys || []).map(id => ([id, true])));\n    this.setState({\n      items: items.filter(({ id }) => !idsDict[id]),\n      selectedRowKeys: [],\n      isLoading: false,\n    });\n  }\n\n  async refresh() {\n    const { doRefresh } = this.props;\n    if (this.state.isLoading) {\n      return;\n    }\n    this.setState({ isLoading: true });\n    const items = await doRefresh();\n    this.setState({ items: (items || []), isLoading: false });\n  }\n\n  render() {\n    const { columns, form, ...otherProps } = this.props;\n    const { items, error, isLoading, selectedRowKeys } = this.state;\n    const WrappedForm = form ? Form.create()(form) : null;\n\n    const messageEl = error ? (\n      <Alert\n        message={(\n          <span>\n            <div style={{ opacity: 0.85 }}>Following error has occurred during last operation:</div>\n            <code>\n              {(typeof error === 'string') ? error : JSON.stringify(error)}\n            </code>\n          </span>)}\n        type=\"error\"\n      />) : null;\n\n    const haveSelection = selectedRowKeys.length > 0;\n\n    const onSelectChange = (newSelectedRowKeys) => {\n      this.setState({ selectedRowKeys: newSelectedRowKeys });\n    };\n\n    const rowSelection = {\n      getCheckboxProps: record => ({\n        disabled: record.name === 'Disabled User', // Column configuration not to be checked\n        name: record.name,\n      }),\n      selectedRowKeys,\n      onChange: e => onSelectChange(e),\n    };\n\n    // const ids = selectedRowKeys.map(rowKey => items[rowKey].id);\n    // const removeSelection = idToUnselect => this.setState({\n    //   selectedRowKeys: selectedRowKeys.filter(\n    //      rowId => items[rowId].id !== idToUnselect),\n    // });\n    const makeDeleteTitle = itemsCount => `Delete ${itemsCount} record${itemsCount > 1\n      ? 's'\n      : ''}?`;\n    const actionsMenu = (\n      <Affix offsetTop={0}>\n        <Row gutter={16} style={{ margin: -16, padding: 16, background: 'rgba(255,255,255,0.9)' }}>\n          <Col span={4} style={{ textAlign: 'left' }}>\n            <span style={{ opacity: 0.75 }}>Selected:</span>\n            <span\n              style={{\n                marginLeft: '0.5em', fontWeight: '300', fontSize: '1.5em',\n              }}\n            >\n              {selectedRowKeys.length}\n            </span>\n          </Col>\n          {haveSelection ? (\n            <Col span={2}>\n              <Popconfirm\n                title={makeDeleteTitle(selectedRowKeys.length)}\n                icon={<Icon type=\"question-circle-o\" style={{ color: 'red' }} />}\n                onConfirm={() => this.handleDelete()}\n                placement=\"bottom\"\n                okText=\"Yes, delete\"\n                cancelText=\"No, i've changed my mind\"\n              >\n                <Button type=\"danger\">Delete selected</Button>\n              </Popconfirm>\n            </Col>\n          ) : null}\n        </Row>\n      </Affix>\n    );\n    // const wf = WrappedForm ? (<WrappedForm onSubmit={data => this.handleSubmit(data)}/>) : '';\n    return (\n      <Spin delay={500} spinning={isLoading}>\n        <div className=\"table-wrapper\">\n          {messageEl}\n          {WrappedForm\n            ? (<WrappedForm onSubmit={data => this.handleSubmit(data)} {...otherProps} />)\n            : ''}\n          <Card title={actionsMenu}>\n            <Table\n              {...otherProps}\n              isLoading={isLoading}\n              columns={columns}\n              rowSelection={rowSelection}\n              dataSource={items || []}\n              onRow={\n                ({ addedRecently }) => (addedRecently\n                  ? { style: { backgroundColor: '#e8f8ff' } }\n                  : {})\n              }\n            />\n          </Card>\n        </div>\n      </Spin>\n    );\n  }\n}\n","/* @flow */\n\nimport React from 'react';\nimport { Alert, Button, Checkbox, Col, DatePicker, Form, Input, Row, Select } from 'antd';\n\ntype PropsType = { form: Object, onSubmit: (data: Object) => void };\n\nexport class CreateUserForm extends React.Component<PropsType> {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n  }\n\n  render() {\n    const { form, onSubmit } = this.props;\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      form.validateFields(async (err, values) => {\n        if (!err) {\n          onSubmit(values);\n        }\n      });\n    };\n\n    const { error } = this.state;\n    const { organizations } = this.props;\n    return (\n      <Form\n        onSubmit={handleSubmit}\n        className=\"create-form\"\n        layout=\"horizontal\"\n        style={{ maxWidth: 1600 }}\n      >\n        <Row>\n          <Col span={20}>\n            {error ? (<Alert message={error} type=\"error\" />) : null}\n            <Row gutter={12} style={{ marginTop: 8, marginBottom: 8 }}>\n              <Col span={8}>\n                {/* username */}\n                <Form.Item>\n                  <Input.Group compact>\n                    {form.getFieldDecorator('username', {\n                      // rules: [{ required: true, message: 'Please input user name!' }],\n                      help: 'Leave username blank to allow user to define it',\n                    })(\n                      <Input placeholder=\"User name (Required)\" style={{ width: '50%' }} />,\n                    )}\n                    {form.getFieldDecorator('organizationId',\n                      (organizations.length === 0) ? {} : { initialValue: organizations[0].id })(\n                        <Select placeholder=\"Namespace (Optional)\" style={{ width: '50%' }}>\n                          {\n                            organizations.map((\n                              { id, name },\n                            ) => (\n                              <Select.Option key={`${id}`} value={id}>{name}</Select.Option>))\n                          }\n                        </Select>,\n                    )}\n                  </Input.Group>\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                {/* email */}\n                <Form.Item>\n                  {form.getFieldDecorator('email', {\n                    rules: [{ required: true, message: 'Please input target user email!' }],\n                  })(\n                    <Input placeholder=\"E-mail (Required)\" />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                {/* username */}\n                <Form.Item>\n                  {form.getFieldDecorator('label', {})(\n                    <Input placeholder=\"Label (Optional)\" />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                {/* is_virtual */}\n                <Form.Item style={{ marginBottom: 0, marginTop: -3 }}>\n                  {form.getFieldDecorator('is_virtual', {\n                    valuePropName: 'checked',\n                  })(\n                    <Checkbox>\n                      For test purposes?\n                    </Checkbox>,\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={8} style={{ marginTop: 8, marginBottom: 8 }}>\n              <Col span={12}>\n                <Form.Item>\n                  <Input.Group compact>\n                    {/* first_name */}\n                    {form.getFieldDecorator('first_name')(\n                      <Input placeholder=\"First name\" style={{ width: '32.5%' }} />,\n                    )}\n\n                    {/* middle_name */}\n                    {form.getFieldDecorator('middle_name')(\n                      <Input placeholder=\"Middle name\" style={{ width: '25%' }} />,\n                    )}\n\n                    {/* last_name */}\n                    {form.getFieldDecorator('last_name')(\n                      <Input placeholder=\"Last name\" style={{ width: '32.5%' }} />,\n                    )}\n\n                    {/* suffix */}\n                    {form.getFieldDecorator('suffix')(\n                      <Input placeholder=\"Suffix\" style={{ width: '10%' }} />,\n                    )}\n                  </Input.Group>\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                {/* date_of_birth */}\n                <Form.Item>\n                  {form.getFieldDecorator('date_of_birth', {})(\n                    <DatePicker\n                      style={{ width: '100%' }}\n                      placeholder=\"Date of birth\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n          </Col>\n          <Col span={2} push={1}>\n            {/* Create user Submit Button */}\n            <Button\n              style={{ marginTop: '2em' }}\n              type=\"primary\"\n              htmlType=\"submit\"\n              icon=\"user-add\"\n            >\n              Create user\n            </Button>\n          </Col>\n        </Row>\n      </Form>\n    );\n  }\n}\n","/* @flow */\n/**\n * Default GRPC host\n * @type {string}\n */\nexport const DEFAULT_GRPC_HOST = 'localhost';\n\n/**\n * Default GRPC port\n * @type {number}\n */\nexport const DEFAULT_GRPC_PORT = 9093;\n\n/**\n * Default GRPC protocol\n * @constant DEFAULT_GRPC_PROTOCOL {http|https}\n */\nexport const DEFAULT_GRPC_PROTOCOL = 'http';\n\n/**\n * Default GRPC proxy port\n * @constant DEFAULT_GRPC_PROXY_PORT\n */\nexport const DEFAULT_GRPC_PROXY_PORT = 9094;\n\n/**\n * Default GRPC proxy protocol\n * @const DEFAULT_GRPC_PROXY_PROTOCOL {http|https}\n */\nexport const DEFAULT_GRPC_PROXY_PROTOCOL = 'http';\n\n/**\n *\n * @type {number}\n */\nexport const USER_SESSION_TOKEN_LIFETIME_SECONDS = 24 * 60 * 60;\n\n/**\n *\n * @type {number}\n */\nexport const OTPT_TOKEN_LIFETIME_SECONDS = 24 * 60 * 60;\n\n/**\n * @const USER_LOGIN_PASSWORD_LIFETIME_SECONDS\n * @type {number}\n */\nexport const USER_LOGIN_PASSWORD_LIFETIME_SECONDS = 365 * 24 * 60 * 60;\n\nexport const CREDENTIAL_TYPE = {\n  CREDENTIAL_UNSPECIFIED: 'CREDENTIAL_UNSPECIFIED',\n  CREDENTIAL_OTP: 'CREDENTIAL_OTP',\n  CREDENTIAL_TOTP: 'CREDENTIAL_TOTP', // Currently not supported\n  CREDENTIAL_SESSION_TOKEN: 'CREDENTIAL_SESSION_TOKEN',\n  CREDENTIAL_USERNAME_PASSWORD: 'CREDENTIAL_USERNAME_PASSWORD',\n};\n\n/**\n * Labels for credential types\n */\nexport const CREDENTIAL_TYPE_VERBOSE = {\n  CREDENTIAL_UNSPECIFIED: 'Unknown type',\n  CREDENTIAL_OTP: 'OTP Credentials',\n  CREDENTIAL_TOTP: 'TOTP Credentials',\n  CREDENTIAL_SESSION_TOKEN: 'Session token',\n  CREDENTIAL_USERNAME_PASSWORD: 'Username/Password',\n};\n\n\n/**\n * @const ACCESS_LEVEL - Access levels enum\n */\nexport const ACCESS_LEVEL = {\n  RESTRICTED: 'RESTRICTED',\n  CAN_READ_RELATIONS: 'CAN_READ_RELATIONS',\n  CAN_WRITE_RELATIONS: 'CAN_WRITE_RELATIONS',\n  CAN_READ: 'CAN_READ',\n  CAN_WRITE: 'CAN_WRITE',\n  CAN_RESET: 'CAN_RESET',\n};\n\nexport const QR_CODE_MAX_SIZE = 512;\n\nexport const BITS_IN_BYTE = 8;\nexport const AUDIO_BYTES_PER_SECOND = 16000;\nexport const AUDIO_BITS_PER_SECOND = AUDIO_BYTES_PER_SECOND * BITS_IN_BYTE; // 128000\n\nexport const BYTES_IN_KILOBYTE = 1024;\nexport const BYTES_IN_MEGABYTE = 1024 * BYTES_IN_KILOBYTE;\nexport const AUDIO_FILE_MAX_SIZE_BYTES = 4 * BYTES_IN_MEGABYTE;\nexport const BYTES_ON_WIRE_MAX = AUDIO_FILE_MAX_SIZE_BYTES / 8;\n\nexport const AUDIO_CHARTS_ENCODING = 'base64';\n\nexport const AUDIO_SAMPLES = [\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_01_13.ogg`, duration: '01:13' },\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_21_45.ogg`, duration: '21:45' },\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_03_51.ogg`, duration: '03:51' },\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_00_30.ogg`, duration: '00:30' },\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_02_46.ogg`, duration: '02:46' },\n  { uri: `${process.env.PUBLIC_URL}/audio/test_sample_05_09.ogg`, duration: '05:09' },\n];\n\nexport const SENTRY_CONFIG = { dsn: 'https://12661b2cfa3c41e49d11c4368b8970c7@sentry.io/1421651' };\nexport const REQUEST_DEMO_ENABLED = false;\n\nexport const PROJECT_NAME = 'Anymetrica';\nexport const PROJECT_DESCRIPTION = 'Reliable solution to assess employee compliance with sales procedures';\n","/* eslint-disable no-undef */\n/* @flow */\nimport pick from 'lodash.pick';\nimport compact from 'lodash.compact';\nimport get from 'lodash.get';\nimport moment from 'moment';\nimport QRious from 'qrious';\nimport { message, Spin } from 'antd';\nimport React from 'react';\nimport {\n  ADMINISTRATING,\n  Contact,\n  CONTACT_EMAIL,\n  Group,\n  HAVE_MEMBER,\n  HAVE_PART,\n  Human,\n  Organization,\n  OTP,\n  OWNS,\n  PostalAddress,\n  UsernamePassword,\n} from 'anymetrica-api/dist/enums';\nimport { registryClient } from '../client';\nimport { MetadataCell, secondsToHumanTime } from '../components/MetadataCell';\nimport { DataTable } from '../components/DataTable';\nimport { CreateUserForm } from './CreateUserForm';\nimport { ACCESS_LEVEL, QR_CODE_MAX_SIZE } from '../constants';\nimport { getStored } from '../session';\n\nconst getCompareObjects = field => (a, b) => {\n  if (a[field] < b[field]) {\n    return -1;\n  }\n  if (a[field] > b[field]) {\n    return 1;\n  }\n  return 0;\n};\n\nconst columns = [\n  {\n    title: 'User Name',\n    dataIndex: 'usernamePassword',\n    key: 'usernamePassword',\n    render: ups => (\n      <span>\n        {(ups || []).map(up => (\n          <div key={`${[up.namespace, up.username].join(':')}`} style={{ fontWeight: 700 }}>\n            {up.username || ''}\n            {up.namespace ? (\n              <span className=\"small fade\" style={{ marginLeft: '0.5em' }}>\n                {up.namespace}\n                :\n              </span>\n            ) : null}\n          </div>))}\n      </span>\n    ),\n  },\n  {\n    title: 'Personal info',\n    dataIndex: 'full_name',\n    key: 'full_name',\n    render: (full_name, human) => (\n      <span>\n        <div key={human.id}>\n          {compact(\n            [\n              'title',\n              'first_name',\n              'middle_name',\n              'last_name',\n              'suffix',\n\n            ].map(f => get(human, f, null)),\n          ).join(' ')}\n        </div>\n        <div>\n          {human.date_of_birth ? moment(human.date_of_birth).format('YYYY-MM-DD') : (\n            <span className=\"fade\">N/A</span>)}\n        </div>\n      </span>),\n  },\n  {\n    title: 'Contacts',\n    dataIndex: 'contact',\n    key: 'contact',\n    render: contact => (\n      <div>\n        {(contact || []).map(\n          ({ contact_type, data }) => (\n            <div key={data}>\n              <span className=\"small fade\">\n                {contact_type}\n                :\n              </span>\n              {' '}\n              {data}\n            </div>),\n        )}\n      </div>\n    ),\n  },\n  {\n    title: 'Groups',\n    dataIndex: 'group',\n    key: 'group',\n    render: group => (\n      <div>\n        {(group || []).map(\n          ({ name }) => (\n            <div key={name}>{name}</div>),\n        )}\n      </div>\n    ),\n  },\n  {\n    title: 'Organizations',\n    dataIndex: 'organization',\n    key: 'organization',\n    render: organization => (\n      <div>\n        {(organization || []).map(\n          ({ domain, name }) => (\n            <div key={domain || name}>\n              {\n                domain\n                  ? (\n                    <div>\n                      <div className=\"big\">{name}</div>\n                      <div className=\"thin\">\n                        <a href={`https://${domain}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {`https://${domain}`}\n                        </a>\n                      </div>\n                    </div>\n                  )\n                  : name || (<span className=\"fade\">Unnamed</span>)\n              }\n            </div>),\n        )}\n      </div>\n    ),\n  },\n  {\n    title: 'OTP Code',\n    dataIndex: 'otp',\n    key: 'otp',\n    render: otps => (\n      <span>\n        {(otps || []).map((otp) => {\n          const otpLink = `${window.location.origin}/sign-up/${(otp || {}).otp || ''}`;\n          const otpUrlQrDataUrl = new QRious({\n            size: QR_CODE_MAX_SIZE,\n            value: otpLink,\n            backgroundAlpha: 1,\n          }).toDataURL();\n          return (\n            <div className=\"qr-code-cell\" key={otp.id}>\n              <div>\n                <div className=\"qr-code-image-placeholder\">\n                  <img alt=\"qr-code\" className=\"qr-code-image\" src={otpUrlQrDataUrl} />\n                </div>\n              </div>\n              <div>\n                {\n                  otp.is_revoked\n                    ? (\n                      <div>\n                        <div style={{ opacity: 0.75 }}>{otp.public}</div>\n                        <div style={{ color: 'red' }}>\n                          <span style={{ fontWeight: 'bold' }}>Revoked: </span>\n                          <span>{secondsToHumanTime(otp.metadata.updated_ts.seconds)}</span>\n                        </div>\n                      </div>\n                    )\n                    : (\n                      <div>\n                        <div style={{ fontWeight: 700 }}>{otp.public}</div>\n                        <span style={{ color: 'green' }}> Unused</span>\n                      </div>\n                    )\n                }\n                <div><a href={otpLink} target=\"_blank\" rel=\"noopener noreferrer\">{otpLink}</a></div>\n                <div style={{ fontSize: '0.7em' }}>(opens in new window)</div>\n              </div>\n            </div>);\n        })}\n      </span>\n    ),\n  },\n  {\n    title: 'Profile Metadata',\n    dataIndex: 'metadata',\n    render: metadata => (<MetadataCell {...metadata} orientation=\"vertical\" />),\n    key: 'metadata',\n  },\n  {\n    title: 'Tester?',\n    dataIndex: 'is_testing',\n    key: 'is_testing',\n    render: is_testing => (is_testing ? 'Yes' : (<span className=\"fade\">No</span>)),\n  },\n];\nconst { CAN_READ, CAN_RESET, CAN_WRITE, CAN_READ_RELATIONS } = ACCESS_LEVEL;\n\nexport class UsersPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      organizations: [],\n      loading: true,\n    };\n  }\n\n  componentWillMount(): void {\n    const req = {\n      request: {\n        traverse_depth: 3,\n        two_way_discovery: true,\n        types: [Organization],\n        relation_types: [ADMINISTRATING],\n      },\n    };\n    registryClient.Discover(req).then(({ entities }) => {\n      this.setState({ loading: false, organizations: entities });\n    }).catch((e) => {\n      console.error(e);\n      // eslint-disable-next-line\n      this.setState({ loading: false, error: e.message });\n    });\n  }\n\n  async doCreate(record: Object): Promise<Object> {\n    const human = (await registryClient.MergeHumans({\n      entities: [\n        {\n          ...pick(\n            record,\n            ['first_name', 'middle_name', 'last_name', 'suffix', 'is_virtual'],\n          ),\n          metadata: { label: record.label },\n          date_of_birth: record.date_of_birth ? {\n            year: moment(get(record, 'date_of_birth', new Date())).get('year'),\n            month: moment(get(record, 'date_of_birth', new Date())).get('month'),\n            day: moment(get(record, 'date_of_birth', new Date())).get('date'),\n          } : null,\n        },\n      ],\n    })).entities[0];\n\n    const contact = (await registryClient.MergeContacts({\n      entities: [\n        { contact_type: CONTACT_EMAIL, data: record.email },\n      ],\n    })).entities[0];\n\n    const otp = (await registryClient.MergeOTPs({\n      entities: [\n        { is_not_set: true },\n      ],\n    })).entities[0];\n\n    // TODO: Add creation of fixed id\n\n    const organization = record.organizationId\n      ? (await registryClient.GetOrganizations({ ids: [record.organizationId] })).entities[0]\n      : (await registryClient.Discover({\n        request: {\n          two_way_discovery: true,\n          traverse_depth: 2,\n          types: [Organization],\n        },\n      })).entities[0];\n    const usernamePassword = (await registryClient.MergeUsernamePasswords({\n      entities: [\n        {\n          is_not_set: true,\n          namespace: organization.domain || getStored().namespace || '',\n          username: record.username || '',\n          // use current user namespace or any other if user is namespace administrator\n        },\n      ],\n    })).entities[0];\n\n    const sessionToken = (await registryClient.MergeSessionTokens({\n      entities: [{ is_not_set: true }],\n    })).entities[0];\n\n    const group = (await registryClient.MergeSessionTokens({\n      entities: [\n        {\n          name: `${record.username || getStored().username || ''} personal`,\n        },\n      ],\n    })).entities[0];\n\n    console.info(`Using following organization for user: \"${organization.name}\" (ID=${organization.id})`);\n    await registryClient.MergeRelations({\n      relations: [\n        { from_id: otp.id, relation_types: [CAN_READ, CAN_READ_RELATIONS], to_id: otp.id },\n\n        // Invitation code allowing to read and set password directly\n        { from_id: otp.id, relation_types: [CAN_READ, CAN_WRITE], to_id: usernamePassword.id },\n\n        // Login and password are allowing self re-definition and introspection\n        {\n          from_id: usernamePassword.id,\n          relation_types: [CAN_RESET, CAN_READ, CAN_READ_RELATIONS, CAN_WRITE],\n          to_id: usernamePassword.id,\n        },\n        // logpass can access to session\n        {\n          from_id: usernamePassword.id,\n          relation_types: [CAN_RESET, CAN_READ],\n          to_id: sessionToken.id,\n        },\n\n        // Human can read and reset login and password\n        // but write own password value directly or break human-pass consistency is possible\n        // only using logpass credentials\n        // Session giving full access to human as entry point\n        { from_id: sessionToken.id, relation_types: [CAN_RESET, CAN_READ], to_id: sessionToken.id },\n        // Session giving full access to human as entry point\n        { from_id: sessionToken.id, relation_types: [ADMINISTRATING], to_id: human.id },\n\n        // Human is entry point to business logic, all credential relations are finished\n        // now defining how human relates with things inside in clean zone\n\n        // Human can see and reset own login and password\n        {\n          from_id: human.id,\n          relation_types: [OWNS, CAN_RESET, CAN_READ, CAN_READ_RELATIONS],\n          to_id: usernamePassword.id,\n        },\n        // Human Can see own invitation code\n        { from_id: human.id, relation_types: [OWNS, CAN_READ], to_id: otp.id },\n        // Human can reset session\n        {\n          from_id: human.id,\n          relation_types: [OWNS, CAN_READ, CAN_RESET],\n          to_id: sessionToken.id,\n        },\n        // Human in main administrator\n        {\n          from_id: human.id,\n          relation_types: [CAN_READ, CAN_READ_RELATIONS],\n          to_id: organization.id,\n        },\n        // User is NOT self-managing own email, having only read access\n        { from_id: human.id, relation_types: [OWNS, CAN_READ], to_id: contact.id },\n        // Group and location\n        { from_id: human.id, relation_types: [OWNS, ADMINISTRATING], to_id: group.id },\n\n        // Own administrator group have administrator as member\n        { from_id: group.id, relation_types: [HAVE_MEMBER], to_id: human.id },\n        {\n          from_id: organization.id,\n          relation_types: [HAVE_MEMBER, CAN_READ, CAN_READ_RELATIONS],\n          to_id: human.id,\n        },\n      ],\n    });\n    return human;\n  }\n\n  async doRefresh(): Promise<Array<Object>> {\n    let allRelations = [];\n    let organizationsAndGroups = [];\n    const res = {};\n    try {\n      const allHumansRelations = await registryClient.Discover({\n        request: {\n          types: [Human],\n          relation_types: [ADMINISTRATING],\n          traverse_depth: 8,\n        },\n      });\n      const humans = allHumansRelations.entities;\n      humans.forEach((h) => {\n        res[h.id] = {\n          ...h,\n          otp: {},\n          usernamePassword: {},\n          contact: {},\n          group: {},\n          organization: {},\n          postalAddress: {},\n          location: {},\n        };\n      });\n      allRelations = (await registryClient.Discover(\n        {\n          ids: humans.map(({ id }) => id),\n          request: {\n            types: [\n              UsernamePassword,\n              OTP,\n              Contact,\n            ],\n            two_way_discovery: true,\n            relation_types: [OWNS, HAVE_PART],\n            traverse_depth: 1,\n          },\n        },\n        {\n          discoverFrom: true,\n          discoverTo: true,\n        },\n      )).relations;\n      organizationsAndGroups = (await registryClient.Discover(\n        {\n          ids: humans.map(({ id }) => id),\n          request: {\n\n            types: [\n              Group,\n              Organization,\n            ],\n            two_way_discovery: true,\n            relation_types: [HAVE_MEMBER],\n            traverse_depth: 2,\n          },\n        },\n        {\n          discoverFrom: true,\n          discoverTo: true,\n        },\n      )).relations;\n    } catch (e) {\n      console.error(e);\n      message(`${JSON.stringify(e)}`);\n      return [];\n    }\n    [\n      ...allRelations,\n      ...organizationsAndGroups,\n    ].forEach(({ from_id, from, to_id, to }) => {\n      const human_id = from.metadata.type === Human ? from_id : to_id;\n      if (!res[human_id]) {\n        return;\n      }\n      const o = from.metadata.type === Human ? to : from;\n      if (!o.metadata) {\n        return;\n      }\n      if (o.metadata.type === Contact) {\n        res[human_id].contact[o.id] = o;\n      }\n      if (o.metadata.type === Organization) {\n        res[human_id].organization[o.id] = o;\n      }\n      if (o.metadata.type === Group) {\n        res[human_id].group[o.id] = o;\n      }\n      if (o.metadata.type === UsernamePassword) {\n        res[human_id].usernamePassword[o.id] = o;\n      }\n      if (o.metadata.type === OTP) {\n        res[human_id].otp[o.id] = o;\n      }\n      if (o.metadata.type === PostalAddress) {\n        res[human_id].postalAddress[o.id] = o;\n      }\n      if (o.metadata.type === Location) {\n        res[human_id].location[o.id] = o;\n      }\n      // return null;\n    });\n    return Object.values(res).sort(getCompareObjects('id')).map(\n      (h) => {\n        [\n          'otp',\n          'usernamePassword',\n          'contact',\n          'group',\n          'organization',\n          'location',\n          'postalAddress',\n        ].forEach(\n          (field) => {\n            h[field] = Object.values(h[field]).sort(getCompareObjects('id'));\n          },\n        );\n        return h;\n      },\n    );\n  }\n\n  render() {\n    const { organizations, loading } = this.state;\n    return (\n      <Spin spinning={loading} delay={500}>\n        <DataTable\n          rowKey={({ id }) => id}\n          form={CreateUserForm}\n          columns={columns}\n          doCreate={this.doCreate}\n          doRefresh={() => this.doRefresh(this.props.session)}\n          organizations={organizations}\n        />\n      </Spin>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\n\nimport { Alert, Button, Form, Icon, Input } from 'antd';\nimport { signIn } from '../session';\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nexport class SignInForm extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { error: null, loading: false };\n  }\n\n  // I'm extremely sorry about lines above, Jesus,\n  // but want to ask why you've gave this fucking react?\n  componentDidMount() {\n    this.ismounted = true;\n  }\n\n  componentWillUnmount() {\n    this.ismounted = false;\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    this.setState({ loading: true, error: null });\n    this.props.form.validateFields(async (errors, values) => {\n      if (errors) {\n        this.setState({ loading: false });\n      }\n      try {\n        const signInResult = await signIn({\n          username: values.username,\n          namespace: values.namespace,\n          password: values.password,\n        });\n        this.setState({\n          error: signInResult.error\n            ? signInResult.error.message || signInResult.error.details\n            : null,\n          loading: false,\n        });\n      } catch (signInError) {\n        this.setState({ error: signInError.message || signInError.details, loading: false });\n      }\n    });\n  }\n\n  render() {\n    const { getFieldDecorator, getFieldsError } = this.props.form;\n    const { error, loading } = this.state;\n    return (\n      <span>\n        {error ? (<Alert message={error} type=\"error\" showIcon />) : null}\n        <Form\n          onSubmit={(e, x) => this.onSubmit(e, x)}\n          className=\"login-form\"\n        >\n          <Form.Item>\n            {getFieldDecorator('username', {\n              rules: [{ required: true, message: 'Please input your user name!' }],\n            })(\n              <Input\n                autoFocus\n                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                placeholder=\"example@test.com\"\n              />,\n            )}\n          </Form.Item>\n          <Form.Item>\n            {getFieldDecorator('password', {\n              rules: [{ required: true, message: 'Please input your password!' }],\n            })(\n              <Input\n                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                type=\"password\"\n                placeholder=\"Your Password\"\n              />,\n            )}\n          </Form.Item>\n          <Form.Item>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              disabled={hasErrors(getFieldsError()) || loading}\n            >\n              Sign in\n            </Button>\n          </Form.Item>\n        </Form>\n      </span>\n    );\n  }\n}\n","/* @flow */\n\nimport React from 'react';\nimport { Alert, Button, Form, Icon, Input } from 'antd';\nimport { UsernamePassword } from 'anymetrica-api/dist/enums';\nimport { registryClient } from '../client';\nimport { signIn } from '../session';\n\nexport class SignUpForm extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      loading: false,\n      otpIsValid: null,\n      otp: this.props.otp,\n      username: null,\n      password: null,\n    };\n  }\n\n  async componentDidMount(): void {\n    if (this.props.otp) {\n      this.checkotp().then().catch(console.error);\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    if (!this.state.otpIsValid) {\n      this.checkotp().then();\n    } else {\n      this.setUserNameAndPassword().then();\n    }\n  }\n\n  async setUserNameAndPassword() {\n    const username = document.getElementById('sign-up-username').value;\n    const namespace = document.getElementById('sign-up-namespace').value;\n    const password = document.getElementById('sign-up-password').value;\n    const usernamePassword = {\n      id: this.state.id,\n      username,\n      namespace,\n      password,\n    };\n    this.setState({\n      loading: true,\n      error: null,\n      ...usernamePassword,\n    });\n    try {\n      const result = await registryClient.MergeUsernamePasswords({\n        request: {\n          credential: {\n            otp: {\n              otp: this.state.otp,\n            },\n          },\n        },\n        entities: [usernamePassword],\n      });\n      if (result.error) {\n        this.setState({ error: `${result.error.details}`, loading: false });\n        return null;\n      }\n      this.setState({\n        ...usernamePassword,\n        error: null,\n        loading: false,\n      });\n      // Returned is without private part, not fine for signing in\n      await signIn(usernamePassword);\n    } catch (e) {\n      this.setState({ error: `${e.message} ${e.stack}`, loading: false });\n    }\n    return null;\n  }\n\n  async checkotp() {\n    const { otp } = this.state;\n    this.setState({ loading: true, error: null, otpIsValid: null });\n    try {\n      const credential = { otp: { otp } };\n      const res = await registryClient.Discover({\n        request: { credential },\n        types: [UsernamePassword],\n      });\n      if (res.error) {\n        console.error(res.error.details);\n        this.setState({ loading: false, otpIsValid: false });\n        return;\n      }\n      const logPassCredentialsIds = res.entities[0].id;\n\n      const usernamePassword = (await registryClient.GetUsernamePasswords({\n        ids: [logPassCredentialsIds],\n        request: { credential },\n      })).entities[0];\n      this.setState({\n        otp,\n        id: logPassCredentialsIds[0],\n        ...usernamePassword,\n        loading: false,\n        otpIsValid: true,\n      });\n    } catch (e) {\n      this.setState({ error: `${e.message} ${e.stack}`, loading: false, otpIsValid: false });\n    }\n  }\n\n  // onotpUpdate(otp) {\n  //   this.setState({ otp });\n  //   this.props.router.navigate(`/sign-up/${otp}`, {\n  //     trigger: false,\n  //     replace: true,\n  //   });\n  // }\n\n  render() {\n    const { error, loading, otp, otpIsValid } = this.state;\n    const submitDisabled = (!otp) || loading;\n    /* || (\n      (!this.state.usernamePassword)\n      || (!this.state.usernamePassword.private)\n      || (!this.state.usernamePassword.public)\n    ) */\n    return (\n      <div>\n        {error ? (<Alert message={error} type=\"error\" showIcon />) : null}\n        <Form onSubmit={e => this.onSubmit(e)} className=\"login-form\">\n          <Form.Item\n            help={(!otp) ? 'Please, enter otp' : ((otpIsValid === false) && 'Entered otp is not valid')}\n            validateStatus={((otpIsValid === false) || (!otp)) ? 'error' : null}\n          >\n            <Input\n              autoFocus\n              prefix={<Icon type=\"qrcode\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n              placeholder=\"otp\"\n              onChange={(e) => { this.setState({ otp: e.target.value, otpIsValid: null }); }}\n              value={otp}\n              disabled={otpIsValid}\n            />\n          </Form.Item>\n          {otpIsValid ? (\n            <div>\n              <Form.Item>\n                <Input\n                  id=\"sign-up-username\"\n                  prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                  placeholder=\"Define your user name\"\n                  value={this.state.username}\n                  autoFocus\n                  autoComplete=\"username\"\n                  onChange={(e) => {\n                    this.setState({\n                      username: e.target.value,\n                    });\n                  }}\n                />\n              </Form.Item>\n              <Form.Item>\n                <Input\n                  disabled\n                  id=\"sign-up-namespace\"\n                  value={this.state.namespace}\n                />\n              </Form.Item>\n\n              <Form.Item>\n                <Input\n                  id=\"sign-up-password\"\n                  prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  autoComplete=\"password\"\n                  value={this.state.password}\n                  onChange={(e) => {\n                    this.setState({ password: e.target.value });\n                  }}\n                />\n              </Form.Item>\n            </div>\n          ) : null}\n          <Form.Item>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              disabled={submitDisabled}\n            >\n              {otpIsValid ? 'Set credentials and Sign Up' : 'Apply invitation otp'}\n            </Button>\n          </Form.Item>\n        </Form>\n      </div>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\nimport { Button } from 'antd';\nimport { STORAGE } from '../session';\n\ntype PropsType = { accepted?: ?boolean };\ntype StateType = { accepted: boolean };\nconst ACCEPTED_STORE_KEY = 'cookies-consent-accepted';\n\nexport class CookiesConsent extends React.Component<PropsType, StateType> {\n  constructor(props) {\n    super(props);\n    const { accepted } = this.props;\n    this.state = {\n      accepted: (typeof accepted === 'boolean')\n        ? accepted\n        : !!STORAGE.getItem(ACCEPTED_STORE_KEY),\n    };\n  }\n\n  onConfirm = () => {\n    STORAGE.setItem(ACCEPTED_STORE_KEY, true);\n    this.setState({ accepted: true });\n  };\n\n  render() {\n    if (this.state.accepted) {\n      return null;\n    }\n    return (\n      <div className=\"cookies-consent\" style={{ display: 'flex', flexDirection: 'row' }}>\n        <h1>We use cookies and other tracking to:</h1>\n        <div style={{ marginRight: '2em' }}>\n          <ul>\n            <li>improve your browsing experience on our website</li>\n            <li>show you personalized content and targeted ads</li>\n            <li>analyze our website traffic</li>\n            <li>understand where our visitors are coming from</li>\n          </ul>\n        </div>\n        <div>\n          <h1>{' '}</h1>\n          <div style={{ marginBottom: '1em' }}>\n            By browsing our website, you consent to our\n            <br />\n            use of cookies and other tracking technologies.\n          </div>\n          <Button onClick={() => this.onConfirm()} htmlType=\"button\" size=\"small\">I agree</Button>\n        </div>\n      </div>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\n\nimport { Alert, Button, Form, Input, message, Modal, Spin } from 'antd';\nimport { registryClient } from '../client';\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nexport class RequestDemoForm extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      error: null,\n      isLoading: false,\n      isOpen: props.isOpen || false,\n    };\n  }\n\n  state = {\n    isOpen: false,\n  };\n\n  async onSubmit(e) {\n    e.preventDefault();\n    this.setState({ isLoading: true, error: null });\n    this.props.form.validateFields(async (errors, values) => {\n      if (errors) {\n        this.setState({ isLoading: false });\n        return;\n      }\n      try {\n        await registryClient.RequestDemo({\n          request_info: {\n            email: values.email,\n            phone: values.phone,\n            company: values.company,\n            whiami: values.whiami,\n          },\n        });\n        this.setState({\n          isLoading: false,\n          isOpen: false,\n        });\n        message.info('Thank you for your interest! We received your request and will contact you soon.');\n      } catch (signInError) {\n        this.setState({\n          error: signInError.message || signInError.details,\n          isLoading: false,\n          isOpen: false,\n        });\n      }\n    });\n  }\n\n  setOpen(isOpen) {\n    this.setState({ isOpen });\n  }\n\n  render() {\n    const { getFieldDecorator, getFieldsError } = this.props.form;\n    const { error, isLoading, isOpen } = this.state;\n    return (\n      <div>\n        <Button\n          type=\"dashed\"\n          htmlType=\"button\"\n          onClick={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.setOpen(true);\n          }}\n        >\n          Request demo\n        </Button>\n        <Modal\n          title=\"Request a demo\"\n          visible={isOpen}\n          onCancel={() => this.setOpen(false)}\n          onOk={e => this.onSubmit(e)}\n        >\n          {\n            error ? (\n              <Alert\n                message={error}\n                type=\"error\"\n                showIcon\n              />\n            ) : null\n          }\n          <Form\n            onSubmit={e => this.onSubmit(e)}\n            className=\"submit-demo-form\"\n          >\n            <Spin spinning={isLoading} delay={500}>\n              <Form.Item\n                label=\"Company name\"\n                help=\"Please input your company name or your own name if you are private person who have interest to our product\">\n                {getFieldDecorator('company', {\n                  rules: [\n                    {\n                      required: true,\n                      message: 'Please, introduce company or yourself',\n                    },\n                  ],\n                })(\n                  <Input\n                    autoFocus\n                    placeholder=\"Acme LIMITED\"\n                  />,\n                )}\n              </Form.Item>\n              <Form.Item label=\"Contact E-mail\">\n                {getFieldDecorator('email', {\n                  rules: [{ required: true, message: 'Please input your email' }],\n                })(\n                  <Input\n                    autoFocus\n                    placeholder=\"example@test.com\"\n                  />,\n                )}\n              </Form.Item>\n              <Form.Item label=\"Contact phone\" help=\"Its optional\">\n                {getFieldDecorator('phone', {})(\n                  <Input\n                    autoFocus\n                    placeholder=\"+1 234 5678901\"\n                  />,\n                )}\n              </Form.Item>\n              <Form.Item label=\"Some words about you and your company\">\n                {getFieldDecorator('whoami', {})(\n                  <Input\n                    type=\"textarea\"\n                    placeholder=\"We are ACME LIMITED, the company having a deep interest in how far the technical progress can go toward business needs...\"\n                  />,\n                )}\n              </Form.Item>\n              <Form.Item>\n                <Button\n                  type=\"primary\"\n                  htmlType=\"submit\"\n                  disabled={hasErrors(getFieldsError())}\n                >\n                  Submit a demo request\n                </Button>\n              </Form.Item>\n            </Spin>\n          </Form>\n        </Modal>\n      </div>\n    );\n  }\n}\n","/* eslint-disable react/style-prop-object */\n/* @flow */\nimport React from 'react';\nimport { PROJECT_DESCRIPTION } from '../constants';\n\nexport class Logo extends React.Component {\n  render() {\n    return (\n      <div\n        data-svg-id=\"4fcabd17013d4c548c63b696bea42470.svg\"\n        data-svg-type=\"shape\"\n        data-display-mode=\"legacyFit\"\n        data-strokewidth={0}\n        data-viewbox=\"0 0 49.03 38.52\"\n        data-preserve-viewbox=\"ignore\"\n        className=\"logo-container\"\n        id=\"comp-iovc9qit\"\n      >\n        <a\n          href=\"https://www.anymetrica.com\"\n          target=\"_self\"\n          style={{ cursor: 'pointer' }}\n          id=\"comp-iovc9qitlink\"\n          className=\"style-jntz7b9clink\"\n        >\n          <div\n            style={{}}\n            className=\"style-jntz7b9c_comp-iovc9qit style-jntz7b9c_non-scaling-stroke style-jntz7b9csvg\"\n            id=\"comp-iovc9qitsvg\"\n          >\n            <svg\n              preserveAspectRatio=\"xMidYMid meet\"\n              data-bbox=\"0 0 49.04 38.52\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 49.04 38.52\"\n              role=\"img\"\n              className=\"logo-large\"\n              strokeWidth={0}\n              fillOpacity={1}\n              strokeOpacity={0}\n            >\n              <g>\n                <path d=\"M8.91 11.99v26.52H0V11.99h8.91z\" />\n                <path d=\"M49.04 21.15v17.37h-8.92V21.15h8.92z\" />\n                <path d=\"M22.28 0v38.52h-8.91V0h8.91z\" />\n                <path d=\"M35.66 9.2v29.32h-8.91V9.2h8.91z\" />\n              </g>\n            </svg>\n            <span style={{\n              fontSize: 36,\n              fontFamily: 'din-next-w01-light, din-next-w02-light, din-next-w10-light, sans-serif',\n              color: 'white',\n              letterSpacing: '0.15em',\n              marginLeft: '0.5em',\n            }}\n            >\nANYMETRICA\n            </span>\n          </div>\n        </a>\n        <div className=\"logo-container-info\">\n          {PROJECT_DESCRIPTION}\n        </div>\n\n      </div>\n    );\n  }\n}\n","/* @flow */\n\nimport React from 'react';\nimport { Form, Layout, Tabs } from 'antd';\nimport { getStored } from '../session';\nimport { SignInForm } from './SignInForm';\nimport { SignUpForm } from './SignUpForm';\nimport { CookiesConsent } from '../components/CookiesConsent';\nimport './AnonymousPage.css';\nimport { RequestDemoForm } from './RequestDemoForm';\nimport { Logo } from './Logo';\nimport { REQUEST_DEMO_ENABLED } from '../constants';\n\ntype StateType = { namespace: ?string, otp: ?string, loading: boolean }\ntype PropsType = { namespace: ?string, otp: ?string }\n\nexport class AnonymousPage extends React.Component<PropsType, StateType> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      session: null,\n      usernamePassword: null,\n      otp: this.props.otp,\n    };\n  }\n\n  render() {\n    const { token } = getStored();\n    if (token) {\n      this.props.router.navigate('/home/dashboard', { trigger: true });\n      return (<div />);\n    }\n    this.WrappedSignInForm = this.WrappedSignInForm || Form.create({ name: 'sign-in' })(SignInForm);\n    this.WrappedRequestDemoForm = this.WrappedRequestDemoForm || Form.create({ name: 'request-demo' })(RequestDemoForm);\n    const tabs = [\n      {\n        title: 'Sign In',\n        key: 'sign-in',\n        getComponent: args => (\n          <div>\n            <this.WrappedSignInForm {...args} onSignIn={this.props.onSignIn} />\n          </div>\n        ),\n      },\n      {\n        title: 'Sign Up',\n        key: 'sign-up',\n        otp: this.state.otp,\n        getComponent: () => (\n          <div><SignUpForm {...this.props} {...this.state} onSignIn={this.props.onSignIn} /></div>),\n      },\n    ];\n    const forms = this.state.otp ? (\n      <Tabs\n        activeKey={this.props.tab}\n        onChange={(activeKey) => {\n          const activeTab = tabs.filter(({ key }) => key === activeKey);\n          this.props.router.navigate(\n            `/${activeKey}${activeTab[0].otp ? `/${activeTab[0].otp}` : ''}`,\n            { trigger: true },\n          );\n        }}\n      >\n        {tabs.map(({ title, key, getComponent }) => (\n          <Tabs.TabPane\n            key={key}\n            tab={title}\n          >\n            {getComponent({ otp: this.props.otp })}\n          </Tabs.TabPane>\n        ))}\n      </Tabs>\n    ) : (\n      <div>\n        <this.WrappedSignInForm\n          onSignIn={e => (this.props.onSignIn ? this.props.onSignIn(e) : null)}\n        />\n        {REQUEST_DEMO_ENABLED ? (\n          <this.WrappedRequestDemoForm\n            onSignIn={e => (this.props.onRequestDemo ? this.props.onRequestDemo(e) : null)}\n          />\n        ) : null}\n      </div>\n    );\n\n    return (\n      <div className=\"sign-in\">\n        <div className=\"sign-in-background\" />\n        <Logo />\n        <Layout>\n          <Layout.Header className=\"cookies-consent-header\">\n            <CookiesConsent />\n          </Layout.Header>\n          <Layout.Content>\n            <div className=\"container\">\n              <div className=\"content\">\n                <div className=\"form-wrapper\">\n                  <div>\n                    {forms}\n                  </div>\n                </div>\n              </div>\n            </div>\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default AnonymousPage;\n","/* @flow */\nimport React from 'react';\nimport { Alert, Button, Col, Form, Icon, Input, Row, Select, Spin } from 'antd';\nimport omit from 'lodash.omit';\nimport { CAN_READ, CAN_READ_RELATIONS, Device, OWNS } from 'anymetrica-api/dist/enums';\nimport { registryClient } from '../client';\n\nimport { MetadataCell } from '../components/MetadataCell';\nimport { DataTable } from '../components/DataTable';\n\n\nconst columns = [\n  {\n    title: 'Label',\n    dataIndex: 'metadata.label',\n    key: 'metadata.label',\n  },\n  {\n    title: 'Type',\n    dataIndex: 'device_type',\n    key: 'device_type',\n  },\n  {\n    title: 'Manufacturer',\n    dataIndex: 'manufacturer',\n    key: 'manufacturer',\n  },\n  {\n    title: 'Model',\n    dataIndex: 'model',\n    key: 'model',\n  },\n  {\n    title: 'Sub-model',\n    dataIndex: 'sub_mode',\n    key: 'sub_mode',\n  },\n  {\n    title: 'Revision',\n    dataIndex: 'revision',\n    key: 'revision',\n  },\n  {\n    title: 'UDID',\n    dataIndex: 'udid',\n    key: 'udid',\n  },\n  {\n    title: 'UDFV',\n    dataIndex: 'udfv',\n    key: 'udfv',\n  },\n  {\n    title: 'IMEI',\n    dataIndex: 'imei',\n    key: 'imei',\n  },\n  {\n    title: 'Metadata',\n    dataIndex: 'metadata',\n    render: (text, obj) => (<MetadataCell {...obj.metadata} orientation=\"vertical\" />),\n    key: 'metadata',\n  },\n];\n\nconst DEVICE_TYPES = [\n  {\n    label: 'Mobile phone',\n    value: 'PHONE',\n  },\n  {\n    label: 'Tablet',\n    value: 'TABLET',\n  },\n  {\n    label: 'Desktop/Laptop Computer',\n    value: 'DESKTOP',\n  },\n  {\n    label: 'Electronic tag (incl. passive)',\n    value: 'TAG',\n  },\n  {\n    label: 'Electronic badge (incl. passive)',\n    value: 'BADGE',\n  },\n  {\n    label: 'Smart Watch',\n    value: 'SMART_WATCH',\n  },\n  {\n    label: 'Generic fitness Device',\n    value: 'FITNESS_DEVICE',\n  },\n  {\n    label: 'Sound recording device',\n    value: 'SOUND_RECORDER',\n  },\n  {\n    label: 'Video recording device',\n    value: 'VIDEO_RECORDER',\n  },\n  {\n    label: 'Robotic device (non-vehicle)',\n    value: 'ROBOTIC',\n  },\n  {\n    label: 'Polymorphic device (e.g. phone emulator)',\n    value: 'POLYMORPHIC',\n  },\n  {\n    label: 'Non-standard category',\n    value: 'OTHER',\n  },\n  /*\n  {\n    label: 'Type not specified',\n    value: 'UNSPECIFIED'\n  },\n  */\n];\n\nfunction hasErrors(fieldsError) {\n  return Object.keys(fieldsError).some(field => fieldsError[field]);\n}\n\nexport class CreateDeviceForm extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = { error: null, loading: false };\n  }\n\n  render() {\n    const { form } = this.props;\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      form.validateFields(async (err, values) => {\n        if (!err) {\n          form.onSubmit([\n            { ...(omit(values, ['label'])), metadata: { label: values.label || null } },\n          ]);\n        }\n      });\n    };\n\n    const { getFieldDecorator, getFieldsError } = this.props.form;\n    const { error, loading } = this.state;\n    return (\n      <div>\n        {error ? (<Alert message={error} type=\"error\" showIcon />) : null}\n        <Spin spinning={loading} delay={500}>\n          <Form\n            onSubmit={handleSubmit}\n            className=\"create-form\"\n            layout=\"horizontal\"\n            style={{ maxWidth: 1600 }}\n          >\n            <Row gutter={16}>\n              <Col span={4}>\n                <span style={{ fontSize: '0.7em' }}>\n                You should be able to take photo of QR code or enter\n                  code manually in installed application\n                </span>\n              </Col>\n              <Col span={4}>\n                <Form.Item label={(\n                  <span style={{ fontSize: '0.7em' }}>Device type</span>)}\n                >\n                  {getFieldDecorator('device_type', {\n                    initialValue: 'PHONE',\n                  })(\n                    <Select label=\"Device type\">\n                      {DEVICE_TYPES.map(({ value, label }) => (\n                        <Select.Option key={value} value={value}>{label}</Select.Option>))}\n                    </Select>,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                <Form.Item label={(\n                  <span style={{ fontSize: '0.7em' }}>\n                    Some distinctive label for your devise\n                  </span>)}\n                >\n                  {getFieldDecorator('label', {\n                    // initialValue: 'My Device X'\n                  })(\n                    <Input\n                      placeholder=\"MyDevice X\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item label={(<span style={{ fontSize: '0.7em' }}>Universal Device ID</span>)}>\n                  {getFieldDecorator('udid', {})(\n                    <Input\n                      placeholder=\"UDID\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item\n                  label={(<span style={{ fontSize: '0.7em' }}>Identifier For Vendor</span>)}\n                >\n                  {getFieldDecorator('idfv', {})(\n                    <Input\n                      placeholder=\"IDFV\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item label={(\n                  <span\n                    style={{ fontSize: '0.7em' }}\n                  >\nInternational Mobile Equipment Identity\n                  </span>)}\n                >\n                  {getFieldDecorator('imei', {})(\n                    <Input\n                      placeholder=\"IMEI\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n            <Row gutter={16}>\n              <Col span={4}>\n                <Form.Item label={(\n                  <span style={{ fontSize: '0.7em' }}>Physical access to device is required</span>)}\n                >\n                  <Button\n                    type=\"primary\"\n                    htmlType=\"submit\"\n                    disabled={hasErrors(getFieldsError())}\n                  >\n                    <Icon type=\"qrcode\" />\n                    {' '}\n                    Start connection process\n                  </Button>\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                <Form.Item label={(\n                  <span style={{ fontSize: '0.7em' }}>Manufacturer</span>)}\n                >\n                  {getFieldDecorator('manufacturer', {})(\n                    <Input\n                      placeholder=\"Dahua Ind.\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={4}>\n                <Form.Item\n                  label={(<span style={{ fontSize: '0.7em' }}>Manufacturer site URI</span>)}\n                >\n                  {getFieldDecorator('manufacturer_site_uri', {})(\n                    <Input\n                      placeholder=\"http://harwarefactory.cn/devices/model_x\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item\n                  label={(<span style={{ fontSize: '0.7em' }}>Model</span>)}\n                >\n                  {getFieldDecorator('model', {})(\n                    <Input\n                      placeholder=\"Model x2_2018\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item\n                  label={(<span style={{ fontSize: '0.7em' }}>Sub-model</span>)}\n                >\n                  {getFieldDecorator('sub_model', {})(\n                    <Input\n                      placeholder=\"Sub-model dX1\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n              <Col span={2}>\n                <Form.Item\n                  label={(<span style={{ fontSize: '0.7em' }}>Revision</span>)}\n                >\n                  {getFieldDecorator('revision', {})(\n                    <Input\n                      placeholder=\"Rev1\"\n                    />,\n                  )}\n                </Form.Item>\n              </Col>\n            </Row>\n          </Form>\n        </Spin>\n      </div>\n    );\n  }\n}\n\n\n// eslint-disable-next-line react/no-multi-comp\nexport class DevicesPage extends React.Component {\n  async doCreate(entity: Object): Promise<Object> {\n    const credential = this.props.session;\n    const device = await registryClient.MergeDevices({\n      entities: entity,\n    });\n\n    const otp = await registryClient.MergeOTPs({\n      entities: [\n        {\n          is_not_set: true,\n          is_revoked: false,\n        },\n      ],\n    });\n    const session = await registryClient.MergeSessionTokens({\n      entities: [\n        {\n          is_not_set: true,\n          is_revoked: false,\n        },\n      ],\n    });\n\n    const otpID = otp.id;\n    const sessionID = session.id;\n    const deviceID = device.id;\n\n    // const relations\n    await registryClient.MergeRelations({\n      credential,\n      relations: [\n        { from_id: otpID, to_id: otpID, relation_type: CAN_READ },\n        { from_id: otpID, to_id: otpID, relation_type: CAN_READ_RELATIONS },\n\n        { from_id: otpID, to_id: sessionID, relation_type: CAN_READ },\n\n        { from_id: sessionID, to_id: deviceID, relation_type: OWNS },\n      ],\n    });\n  }\n\n  async doRefresh(): Promise<Array<Object>> {\n    const foundDevices = await registryClient.Discover({\n      types: [Device],\n    });\n    if (foundDevices.relations.length) {\n      const entities = await registryClient.GetDevices({\n        ids: foundDevices.relations.map(({ to: { id } }) => id),\n      });\n      return (entities.entities || []);\n    }\n    return [];\n  }\n\n  render() {\n    return (\n      <DataTable\n        rowKey={({ id }) => id}\n        form={CreateDeviceForm}\n        columns={columns}\n        doCreate={entities => this.doCreate(entities)}\n        doRefresh={() => this.doRefresh()}\n      />\n    );\n  }\n}\n\nexport default DevicesPage;\n","/* @flow */\n\nimport React from 'react';\nimport { Alert, Button, Checkbox, Col, Form, Input, Row } from 'antd';\n\nconst FormItem = Form.Item;\n\ntype PropsType = { form: Object, onSubmit: (data: Object) => void, isGeographicLocation: ?boolean, setGeographicLocationMode: (enabled: boolean) => void };\ntype StateType = { isGeographicLocation: boolean, error: ?string };\n\nexport class CreateGroupForm extends React.Component<PropsType, StateType> {\n  constructor(props) {\n    super(props);\n    this.state = { error: null, isGeographicLocation: props.isGeographicLocation || false };\n  }\n\n  setGeographicLocation(e) {\n    if (this.props.setGeographicLocationMode) {\n      this.props.setGeographicLocationMode(e.target.checked);\n    }\n    this.setState({ isGeographicLocation: e.target.checked });\n  }\n\n  render() {\n    const { form, onSubmit } = this.props;\n\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      form.validateFields(async (err, values) => {\n        if (!err) {\n          return onSubmit(values);\n        }\n        return null;\n      });\n    };\n\n    const { error } = this.state;\n    return (\n      <Form\n        onSubmit={handleSubmit}\n        className=\"create-form\"\n        layout=\"vertical\"\n        style={{ maxWidth: 1200 }}\n      >\n        {error ? (<Alert message={error} type=\"error\" />) : null}\n        <Row gutter={16}>\n          <Col span={16}>\n            <Row>\n              <FormItem>\n                <Col span={24}>\n                  {form.getFieldDecorator('name', {\n                    rules: [{ required: true, message: 'Please input the group name!' }],\n                  })(\n                    <Input placeholder=\"New group name\" />,\n                  )}\n                </Col>\n              </FormItem>\n            </Row>\n            {this.state.isGeographicLocation ? (\n              <span>\n                <Row>\n                  <FormItem>\n\n                    <Col span={8}>\n                      {form.getFieldDecorator('postal_code', {\n                        label: 'Postal code',\n                      })(\n                        <Input placeholder=\"Postal code\" />,\n                      )}\n                    </Col>\n                    <Col span={4}>\n                      {form.getFieldDecorator('minor_postal_code', {\n                        label: 'Minor Postal code',\n                      })(\n                        <Input placeholder=\"Minor Postal code\" />,\n                      )}\n                    </Col>\n                    <Col span={12}>\n                      {form.getFieldDecorator('administrative_area', {\n                        label: 'Administrative area',\n                      })(\n                        <Input placeholder=\"Administrative area\" />,\n                      )}\n                    </Col>\n                  </FormItem>\n                </Row>\n                <Row>\n                  <FormItem>\n                    <Col span={12}>\n                      {form.getFieldDecorator('locality', {\n                        label: 'City/Locality',\n                      })(\n                        <Input placeholder=\"City/Locality\" />,\n                      )}\n                    </Col>\n                    <Col span={12}>\n                      {form.getFieldDecorator('sublocality', {\n                        label: 'District/Sub-Locality',\n                      })(\n                        <Input placeholder=\"District/Sub-Locality\" />,\n                      )}\n                    </Col>\n                  </FormItem>\n                </Row>\n                <Row>\n                  <FormItem>\n                    <Col span={12}>\n                      {form.getFieldDecorator('address_lines_1', {\n                        label: 'Address line 1',\n                      })(\n                        <Input placeholder=\"Address line 1\" />,\n                      )}\n                    </Col>\n                    <Col span={12}>\n                      {form.getFieldDecorator('address_lines_2', {\n                        label: 'Address line 2',\n                      })(\n                        <Input placeholder=\"Address line 2\" />,\n                      )}\n                    </Col>\n                  </FormItem>\n                </Row>\n              </span>\n            ) : null}\n          </Col>\n          <Col span={4}>\n            <FormItem>\n              <Checkbox\n                value={this.state.isGeographicLocation}\n                onChange={(e) => { this.setGeographicLocation(e); }}\n              >\n                Is geographic location\n              </Checkbox>\n            </FormItem>\n          </Col>\n          <Col span={4}>\n            <FormItem>\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                icon=\"plus\"\n              >\n                Create group\n              </Button>\n            </FormItem>\n          </Col>\n        </Row>\n      </Form>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\nimport { Group } from 'anymetrica-api/dist/enums';\nimport { registryClient } from '../client';\nimport { MetadataCell } from '../components/MetadataCell';\nimport { DataTable } from '../components/DataTable';\nimport { CreateGroupForm } from './CreateGroupForm';\n\n\nconst columns = [\n  {\n    title: 'Location name',\n    dataIndex: 'name',\n    key: 'name',\n  },\n  {\n    title: 'Metadata',\n    dataIndex: 'metadata.created_ts.seconds',\n    render: (text, obj) => (<MetadataCell {...obj.metadata} orientation=\"horizontal\" />),\n    key: 'metadata.updated_ts.seconds',\n  },\n];\n\n\nexport class GroupsPage extends React.Component {\n\n  async doRefresh(): Promise<Array<Object>> {\n    const foundGroups = await registryClient.Discover({ types: [Group] });\n    if (foundGroups.entities) {\n      const entities = await registryClient.GetGroups(\n        { ids: foundGroups.entities.map(({ id }) => id) },\n      );\n      return (entities.entities || []);\n    }\n    return [];\n  }\n\n  async doCreate(entity: Object): Promise<Object> {\n    const group = await registryClient.MergeGroups({ entities: [entity] });\n    return group.entities;\n  }\n\n  render() {\n    return (\n      <DataTable\n        rowKey={({ id }) => id}\n        form={CreateGroupForm}\n        columns={columns}\n        doCreate={this.doCreate}\n        doRefresh={() => this.doRefresh()}\n      />\n    );\n  }\n}\n\nexport default GroupsPage;\n","/* @flow */\nimport React from 'react';\nimport { Button, Card, Col, List, Row } from 'antd';\n\n// eslint-disable-next-line react/prefer-stateless-function\nexport class ProfilePage extends React.Component {\n  render() {\n    const dataSource = [\n      'Surrogate Placeholder record #1',\n      'Surrogate Placeholder record #2',\n      'Surrogate Placeholder record #3',\n    ];\n    return (\n      <Row gutter={32}>\n        <Col span={18}>\n          <Card title=\"My activity journal\">\n            <List\n              dataSource={dataSource}\n              bordered\n              renderItem={item => (<List.Item>{item}</List.Item>)}\n            />\n          </Card>\n        </Col>\n        <Col span={6}>\n          <Card title=\"Danger zone!\" headStyle={{ color: 'red' }}>\n            <span>\n              <Button disabled type=\"danger\">Reset my password</Button>\n              <div>Password reset link will be sent to your E-mail</div>\n            </span>\n            <Button disabled type=\"danger\">Close all my open session</Button>\n            <div>This will close all sessions you`ve opened on all devices</div>\n          </Card>\n        </Col>\n      </Row>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\nimport moment from 'moment';\n\nexport const TIME_CODE_STYLE = {\n  whiteSpace: 'nowrap',\n  display: 'flex',\n  alignItems: 'center',\n  flexDirection: 'row',\n};\n\nexport function TimeCode(props) {\n  const { seconds } = props;\n  const momentDate = moment().startOf('year').add({ seconds: seconds || 0 });\n  const [major, minor] = momentDate.format('HH:mm:ss.SS').split('.');\n  const [h, m, s] = major.split(':');\n  return (\n    <span style={{ ...TIME_CODE_STYLE, ...(props.style || {}) }}>\n      <span>{h}</span>\n      <span className=\"bold\" style={{ marginLeft: '0.1em', marginRight: '0.1em' }}>:</span>\n      <span className=\"\">{m}</span>\n      <span className=\"bold\" style={{ marginLeft: '0.1em', marginRight: '0.1em' }}>:</span>\n      <span>{s}</span>\n      <span style={{ marginLeft: '0.1em', marginRight: '0.1em' }}>.</span>\n      <span className=\"fade\">{minor}</span>\n    </span>\n  );\n}\n","/* eslint-disable no-undef */\n/* @flow */\nimport React from 'react';\nimport { ms2obj } from 'anymetrica-utils';\nimport { ContentType } from 'anymetrica-api/dist/enums';\nimport { Button, Card, Col, Form, Icon, Row, Select, Spin } from 'antd';\nimport {\n  AUDIO_BITS_PER_SECOND,\n  AUDIO_BYTES_PER_SECOND,\n  AUDIO_FILE_MAX_SIZE_BYTES,\n  AUDIO_SAMPLES,\n  BYTES_ON_WIRE_MAX,\n} from '../constants';\nimport { TimeCode } from '../components/TimeCode';\nimport { registryClient } from '../client';\n\nconst TIMER_UPDATE_INTERVAL_MS = 100;\n\n// const AudioBufferSlice = async (buffer, beginMs, endMs) => new Promise((resolve, reject) => {\n//   let error = null;\n//\n//   // eslint-disable-next-line prefer-destructuring\n//   const duration = buffer.duration;\n//   const channels = buffer.numberOfChannels;\n//   const rate = buffer.sampleRate;\n//   console.log('buffer.numberOfChannels', buffer.numberOfChannels);\n//\n//   // milliseconds to seconds\n//   const begin = beginMs / 1000;\n//   const end = endMs / 1000;\n//\n//   if (begin < 0) {\n//     error = new RangeError('begin time must be greater than 0');\n//   }\n//\n//   if (end > duration) {\n//     error = new RangeError(`end time must be less than or equal to ${duration}`);\n//   }\n//\n//   const startOffset = rate * begin;\n//   const endOffset = rate * end;\n//   const frameCount = endOffset - startOffset;\n//   let newAudioBuffer;\n//\n//   try {\n//     newAudioBuffer = audioContext.createBuffer(channels, endOffset - startOffset, rate);\n//     const anotherArray = new Float32Array(frameCount);\n//     const offset = 0;\n//\n//     for (let channel = 0; channel < channels; channel += 1) {\n//       buffer.copyFromChannel(anotherArray, channel, startOffset);\n//       newAudioBuffer.copyToChannel(anotherArray, channel, offset);\n//     }\n//   } catch (e) {\n//     error = e;\n//   }\n//   if (error) {\n//     reject(error);\n//   } else {\n//     resolve(newAudioBuffer);\n//   }\n// });\n\nconst loadUriToBlob = async (uri): Promise<AudioBuffer> => {\n  try {\n    const response = await fetch(uri);\n    if (!response.ok) {\n      const e = new Error(`HTTP error, status = ${response.status}`);\n      console.error(e);\n      // noinspection ExceptionCaughtLocallyJS\n      throw e;\n    } else {\n      const blob = await response.blob();\n      return {\n        type: response.headers.get('content-type') || 'audio/',\n        blob,\n      };\n    }\n  } catch (e) {\n    console.error(e);\n    throw (e);\n  }\n};\n\n/**\n * From: https://www.russellgood.com/how-to-convert-audiobuffer-to-audio-file/\n * @param abuffer\n * @param len\n * @return {Blob}\n */\n// eslint-disable-next-line no-unused-vars\nconst bufferToWave = (abuffer, len) => {\n  const numOfChan = abuffer.numberOfChannels;\n  const length = len * numOfChan * 2 + 44;\n  const buffer = new ArrayBuffer(length);\n  const view = new DataView(buffer);\n  const channels = [];\n  let i;\n  let sample;\n  let offset = 0;\n  let pos = 0;\n\n  const setUint16 = (data) => {\n    view.setUint16(pos, data, true);\n    pos += 2;\n  };\n\n  const setUint32 = (data) => {\n    view.setUint32(pos, data, true);\n    pos += 4;\n  };\n\n  // write WAVE header\n  setUint32(0x46464952); // \"RIFF\"\n  setUint32(length - 8); // file length - 8\n  setUint32(0x45564157); // \"WAVE\"\n\n  setUint32(0x20746d66); // \"fmt \" chunk\n  setUint32(16); // length = 16\n  setUint16(1); // PCM (uncompressed)\n  setUint16(numOfChan);\n  setUint32(abuffer.sampleRate);\n  setUint32(abuffer.sampleRate * 2 * numOfChan); // avg. bytes/sec\n  setUint16(numOfChan * 2); // block-align\n  setUint16(16); // 16-bit (hardcoded in this demo)\n\n  setUint32(0x61746164); // \"data\" - chunk\n  setUint32(length - pos - 4); // chunk length\n\n  // write interleaved data\n  for (i = 0; i < abuffer.numberOfChannels; i += 1) {\n    channels.push(abuffer.getChannelData(i));\n  }\n\n  while (pos < length) {\n    for (i = 0; i < numOfChan; i += 1) { // interleave channels\n      sample = Math.max(-1, Math.min(1, channels[i][offset])); // clamp\n      // scale to 16-bit signed int\n      // eslint-disable-next-line\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0;\n      view.setInt16(pos, sample, true); // write 16-bit sample\n      pos += 2;\n    }\n    offset += 1; // next source sample\n  }\n\n  // create Blob\n  return new Blob([buffer], { type: 'audio/ogg; codecs=opus' });\n};\n\nexport class SoundCapturePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputDevices: [],\n      isInitializing: true,\n      isRecording: false,\n      audioUrl: null,\n      isUploaded: false,\n      isUploading: false,\n      recordingStartMs: 0,\n      recordingEndMs: 0,\n      syncError: null,\n    };\n    this.bytesOnWire = 0;\n    this.audioBlobs = [];\n    this.mediaRecorder = null;\n  }\n\n  async componentDidMount(): void {\n    this.setState({ isInitializing: true });\n    let finishState = { isInitializing: false };\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      const devices = (await navigator.mediaDevices.enumerateDevices()) || [];\n      const inputDevices = devices.filter(d => (d.kind === 'audioinput'));\n      finishState = {\n        ...finishState,\n        inputDevices,\n        activeDeviceId: (inputDevices[0] || {}).deviceId,\n      };\n    }\n    this.setState(finishState);\n  }\n\n  async syncToServer() {\n    if (this.state.isUploading) {\n      return;\n    }\n    this.setState({ syncError: null, audioUrl: null, isUploading: true });\n    let audioUrl;\n    if (this.audioBlobs.length > 0) {\n      const audioBlob = this.audioBlobs[0];\n      const { recordingEndMs, recordingStartMs } = this.state;\n      await this.sendBlobToServer(\n        audioBlob,\n        {\n          media_start_ts: ms2obj(recordingStartMs),\n          media_end_ts: ms2obj(recordingEndMs),\n        },\n      );\n      audioUrl = URL.createObjectURL(audioBlob);\n      this.audioBlobs = this.audioBlobs.slice(1);\n      const nowMs = (new Date()).getTime();\n      this.setState({\n        // eslint-disable-next-line react/no-access-state-in-setstate\n        audioUrl: audioUrl || this.state.audioUrl,\n        isUploading: false,\n        recordingEndMs: recordingStartMs, // User previous start ts\n        recordingStartMs: nowMs,\n      });\n      window.setTimeout(() => {\n        this.syncToServer().catch((e) => {\n          console.error(e);\n          this.setState({ syncError: e.message || e.details });\n        });\n      }, 0);\n    } else {\n      this.setState({\n        isUploading: false,\n      });\n    }\n  }\n\n  async blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(blob);\n      reader.onloadend = () => {\n        resolve(reader.result.split(',')[1]);\n      };\n      reader.onerror = reject;\n    });\n  }\n\n  async sendBlobToServer(blob, { media_start_ts, media_end_ts }) {\n    // eslint-disable-next-line no-unused-vars\n    const [content_type, media_type] = (blob.type || 'audio/').toLowerCase()\n      .replace(/[\\n\\t\\r ]+/g, '')\n      .replace(/;.*$/g, '')\n      .split('/');\n    const name = `device-record-${media_start_ts.seconds}-${media_end_ts.seconds}.${media_type}`;\n    const content = await this.blobToBase64(blob);\n    try {\n      const { entities } = await registryClient.MergeFiles({\n        entities: [\n          {\n            name,\n            content_type: ContentType.audio,\n            media_type: 'ogg',\n            media_start_ts,\n            media_end_ts,\n            content,\n            size_bytes: blob.length,\n            hashes: [],\n          },\n        ],\n      });\n      return entities;\n    } catch (e) {\n      this.setState({ syncError: e.message || `${e.code} ${e.details}` });\n      throw e;\n    }\n  }\n\n  // recorder.onstop = function (e) {\n  //   var audio = document.createElement('audio');\n  //   audio.src = window.URL.createObjectURL(new Blob(data));\n  // };\n  // recorder.start();\n  // recorder.start();\n  // setTimeout(function () {\n  //   rec.stop();\n  // }, 5000);\n  // }).catch(function onError(error) {\n  //   console.error(error.message);\n  // });\n  //   const transportArray = new Float32Array(ab.length);\n  //   ab.copyFromChannel(transportArray, 0, 0);\n  //   const buff = Uint8Array.from(new ArrayBuffer(transportArray));\n  //   const content = bufferToBase64(buff);\n  //   try {\n  //     const { entities } = await registryClient.MergeFiles({\n  //       entities: [\n  //         {\n  //           name,\n  //           content_type,\n  //           media_type,\n  //           media_start_ts,\n  //           media_end_ts,\n  //           content,\n  //           size_bytes: ab.length,\n  //           hashes: [],\n  //         },\n  //       ],\n  //     });\n  //     return entities;\n  //   } catch (e) {\n  //     this.setState({ syncError: e.message || `${e.code} ${e.details}` });\n  //     throw e;\n  //   }\n\n\n  // const gainNode = audioContext.createGain();\n  // gainNode.gain.value = 1;\n  // source.connect(gainNode);\n  // gainNode.connect(audioContext.destination);\n\n\n  async stopRecording() {\n    if (this.counter) {\n      window.clearInterval(this.counter);\n      this.counter = null;\n    }\n    this.setState({ isRecording: false });\n  }\n\n  async toggleRecording(): void {\n    if (this.state.isRecording\n    ) {\n      this.mediaRecorder.stop();\n    } else {\n      this.audioBlobs = [];\n      const handleStream = (stream) => {\n        const now = (new Date()).getTime();\n        this.setState({\n          recordingStartMs: now,\n          recordingEndMs: now,\n          isUploading: false,\n          isUploaded: true,\n        });\n        if (!this.mediaRecorder) {\n          this.mediaRecorder = new MediaRecorder(stream, {\n            audioBitsPerSecond: AUDIO_BITS_PER_SECOND,\n            AUDIO_FILE_MAX_SIZE_BYTES,\n          });\n          this.mediaRecorder.addEventListener('dataavailable', (e) => {\n            console.log('Got media chunk with size:', e.data.size);\n            const audioBlob = new Blob([e.data], { type: 'audio/ogg;codecs=opus' });\n            this.audioBlobs.push(audioBlob);\n            this.syncToServer().catch((se) => {\n              console.error(se);\n              throw se;\n            });\n          });\n          this.mediaRecorder.addEventListener('stop', () => this.stopRecording());\n        }\n        this.mediaRecorder.start((BYTES_ON_WIRE_MAX / AUDIO_BYTES_PER_SECOND) * 1000);\n        this.counter = window.setInterval(() => {\n          this.setState({ recordingEndMs: (new Date()).getTime() });\n        }, TIMER_UPDATE_INTERVAL_MS);\n      };\n      navigator.mediaDevices.getUserMedia({\n        audio: this.state.activeDeviceId ? { deviceId: this.state.activeDeviceId } : true,\n        video: false,\n      }).then(handleStream);\n      this.setState({ isRecording: true });\n    }\n  }\n\n  async loadSample(sampleUri) {\n    console.info(`Loading audio sample resource from URI: ${sampleUri}`);\n    const { blob } = await loadUriToBlob(sampleUri);\n    this.blob = blob;\n    if (!blob) {\n      const syncError = `Sample resource not found: ${sampleUri}`;\n      console.error(syncError);\n      this.setState({ syncError });\n      return;\n    }\n    const audioUrl = URL.createObjectURL(blob);\n    this.setState({ audioUrl });\n  }\n\n  render() {\n    const {\n      isUploading,\n      isUploaded,\n      isRecording,\n      isInitializing,\n      audioUrl,\n      syncError,\n      activeDeviceId,\n      inputDevices,\n      recordingEndMs,\n      recordingStartMs,\n    } = this.state;\n    const recDurSec = ((recordingEndMs - recordingStartMs) / 1000) || null;\n    return (\n      <Card title=\"Sound Capture test\">\n        <Spin spinning={isInitializing || isUploading} delay={500}>\n          <Row gutter={16}>\n            <Col span={8}>\n              {(inputDevices.length > 0)\n                ? (\n                  <Select\n                    label=\"Select recording device:\"\n                    disabled={isRecording || (inputDevices.length === 0)}\n                    onChange={deviceNum => this.setState({ activeDeviceId: deviceNum })}\n                    value={activeDeviceId}\n                    defaultValue={(inputDevices[0] || {}).deviceId}\n                    style={{ width: '100$' }}\n                  >\n                    {inputDevices.map(\n                      (d, idx) => (\n                        // eslint-disable-next-line react/no-array-index-key\n                        <Select.Option key={`${idx} ${d.deviceId}`} value={d.deviceId}>\n                          {[idx, d.kind || '', d.label || ''].join(' ')}\n                        </Select.Option>\n                      ),\n                    )}\n                  </Select>\n                ) : (\n                  <span>No input devices (microphones) found or browser not supporting them!</span>\n                )}\n            </Col>\n            <Col span={3} style={{ textAlign: 'center' }}>\n              <Button\n                disabled={inputDevices.length === 0}\n                onClick={() => this.toggleRecording()}\n                style={{ width: '100%' }}\n              >\n                {isRecording ? '⬛ Stop' : '🔴 Record audio'}\n              </Button>\n              {recDurSec\n                ? (\n                  <TimeCode\n                    style={{ width: '100%', display: 'inline-block' }}\n                    seconds={recDurSec}\n                  />\n                )\n                : (<div className=\"fade\" style={{ width: '100%' }}>No record</div>)}\n            </Col>\n            <Col span={4}>\n              {syncError ? (<span style={{ color: 'red' }}>{syncError}</span>) : null}\n              {isUploading ? (\n                <span>\n                  <span style={{ marginRight: '1em' }}>Uploading to server</span>\n                  <Icon type=\"loading\" />\n                </span>\n              ) : null}\n              {((!isRecording) && isUploaded) ? (\n                <div>\n                  <span style={{ marginRight: '1em' }}>Uploaded to server</span>\n                </div>) : null}\n            </Col>\n            <Col span={4}>\n              Last fragment playback:\n              {audioUrl\n                ? (\n                  // eslint-disable-next-line jsx-a11y/media-has-caption\n                  <audio\n                    id=\"player\"\n                    controls\n                    src={audioUrl}\n                    style={{ width: '100%' }}\n                    onLoadedMetadata={async (e) => {\n                      if (this.blob) {\n                        const nowMs = (new Date()).getTime();\n                        const startTsMs = nowMs - (e.target.duration * 1000);\n                        const endTsMs = nowMs;\n                        try {\n                          await this.sendBlobToServer(\n                            this.blob,\n                            {\n                              media_start_ts: ms2obj(startTsMs),\n                              media_end_ts: ms2obj(endTsMs),\n                            },\n                          );\n                          this.setState({ isUploading: false, isUploaded: true });\n                          this.blob = null;\n                        } catch (audioSendError) {\n                          console.error(audioSendError);\n                          throw audioSendError;\n                        }\n                      }\n                    }}\n                  />\n                )\n                : null\n              }\n            </Col>\n            <Col span={4}>\n              {\n                AUDIO_SAMPLES.map(({ uri, duration }) => (\n                  <Form.Item key={uri}>\n                    <Button onClick={() => this.loadSample(uri)}>\n                      Load sample (\n                      {duration}\n                      )\n                    </Button>\n                  </Form.Item>\n                ))\n              }\n            </Col>\n          </Row>\n        </Spin>\n      </Card>\n    );\n  }\n}\n\n// <a href={process.env.PUBLIC_URL + '/audio/test_sample_01_13.ogg'}>Sample 1</a>\n// <a href={process.env.PUBLIC_URL + '/audio/test_sample_21_45.ogg'}>Sample 2</a>\n","/* @flow */\nimport React from 'react';\nimport { seconds2moment } from 'anymetrica-utils';\n\nexport function TimeRange(props) {\n  const secToCell = (sec) => {\n    const d = seconds2moment(sec).format('YYYY MMM');\n    const day = seconds2moment(sec).format('DD');\n    const dw = `(${seconds2moment(sec).format('ddd')})`;\n    const t = seconds2moment(sec).format('HH:mm:ss');\n    //  <span style=\"light\">{dw}</span>\n    return (\n      <div style={{ textAlign: 'left', flex: 1 }}>\n        <div className=\"small\">\n          <span style={{ marginRight: '0.25em' }}>{d}</span>\n          <span style={{ marginRight: '0.25em' }}>{day}</span>\n          <span className=\"light\">{dw}</span>\n        </div>\n        <div>{t}</div>\n      </div>\n    );\n  };\n  const { media_start_ts, media_end_ts } = props;\n  return (\n    <div style={{ whiteSpace: 'nowrap', display: 'flex', flexDirection: 'row' }}>\n      {media_start_ts ? secToCell(parseInt(media_start_ts.seconds, 10)) : 'N/A'}\n      <span style={{ padding: '0.5em', textAlign: 'center' }}> - </span>\n      {media_start_ts ? secToCell(parseInt(media_end_ts.seconds, 10)) : 'N/A'}\n    </div>);\n}\n","/* eslint-disable no-undef */\n/* @flow */\nimport React from 'react';\nimport { Card } from 'antd';\nimport { CREATED, File } from 'anymetrica-api/dist/enums';\nimport { registryClient } from '../client';\nimport { VoiceTimeline } from '../components/VoiceTimeline';\nimport { DataTable } from '../components/DataTable';\nimport { TimeRange } from '../components/TimeRange';\n\nexport const disableSpace = e => ((e || {}).keyCode !== 32);\n\nexport class SoundRecordsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeId: null,\n    };\n  }\n\n  componentDidMount(): void {\n    document.addEventListener('keyup', disableSpace);\n  }\n\n  componentWillUnmount(): void {\n    document.removeEventListener('keyup', disableSpace);\n  }\n\n  async refresh(): Promise<Array<Object>> {\n    const { entities } = (await registryClient.Discover(\n      {\n        request: {\n          types: [File],\n          relation_types: [CREATED],\n          traverse_depth: 1,\n        },\n      },\n      {\n        discoverFrom: false,\n        discoverTo: true,\n      },\n    ));\n    this.setState({\n      activeId: ((entities && (entities.length > 0)) ? entities[0].id : null),\n    });\n    return entities;\n  }\n\n  render() {\n    const columns = [\n      {\n        title: 'Start - End (UTC0)',\n        width: 128,\n        render: (_, obj) => (\n          <TimeRange media_start_ts={obj.media_start_ts} media_end_ts={obj.media_end_ts} />\n        ),\n      },\n      {\n        // width: '100%',\n        dataIndex: 'id',\n        key: 'id',\n        render: (id, r) => (\n          <VoiceTimeline\n            activateHandler={() => {\n              this.setState({ activeId: id });\n            }}\n            isActive={this.state.activeId === id}\n            record={r}\n          />\n        ),\n      },\n    ];\n    return (\n      <div>\n        <Card>\n          <DataTable\n            rowClassName=\"row-compact\"\n            rowKey={({ id }) => id}\n            columns={columns}\n            doCreate={this.doCreate}\n            doRefresh={() => this.refresh()}\n          />\n        </Card>\n      </div>\n    );\n  }\n}\n\n/*\n  <Row>\n            <Col span={8}>\n              <span className=\"big light\">Mr User Name</span>\n            </Col>\n          </Row>\n          <Row>\n            <Col span={24}>\n              <Card style={{ height: 64, marginBottom: 8, padding: 0 }} bodyStyle={{ padding: 0 }}>\n                <div className=\"daily-timeline\">{\n                  records.map((record, idx) => {\n                    const mediaStartTsMs = obj2ms(record.media_start_ts);\n                    const mediaEndTsMs = obj2ms(record.media_end_ts);\n                    const recordDuration = (mediaEndTsMs - mediaStartTsMs);\n                    const recordPart = recordDuration / VIEW_RANGE_MS;\n                    const recordPercent = recordPart * 100;\n                    const constPrevRecordEndTsMs = (idx > 0)? obj2ms(records[idx - 1].media_end_ts)\n                     : mediaStartTsMs;\n                    const marginLeftPercent = (constPrevRecordEndTsMs / VIEW_RANGE_MS) * 100;\n                    / 1000, 'sec', recordPercent, '%', marginLeftPercent, '%');\n                    return (<VoiceTimeline\n                      record={record}\n                      style={{\n                        marginLeft: `${marginLeftPercent}%`,\n                        width: `${recordPercent}%`,\n                      }}\n                    />);\n                  })\n                }</div>\n              </Card>\n            </Col>\n          </Row>\n          <Row>\n            <Col span={24} style={{ display: 'flex', marginBottom: 16 }}>\n              {' '.repeat(VIEW_RANGE_HOURS).split('').map((_, h) => {\n                const t2 = moment()\n                  .startOf('hour')\n                  .add(VIEW_RANGE_HOURS, 'hour')\n                  .subtract(h, 'hour');\n                const t1 = t2.clone().subtract(1, 'hour');\n\n                return (<span\n                  key={h}\n                  style={{\n                    flex: 1,\n                    height: 16,\n                    textAlign: 'center',\n                    borderRight: 0.5,\n                    borderLeft: 0.5,\n                  }}\n                  className=\"small\"\n                >\n                  {t1.format('DD MMM HH:mm')} - {t2.format('DD MMM HH:mm')}\n                </span>);\n              })}\n            </Col>\n          </Row>\n */\n","import React from 'react';\n\nexport const PrivacyPolicy = () => (\n  <div>\n    <h1>Privacy Policy</h1>\n    <p>Effective date: March 01, 2019</p>\n    <p>\n      Anymetrica (\n      {'\"'}\n      us\n      {'\"'}\n      ,\n      {' '}\n      {'\"'}\n      we\n      {'\"'}\n      , or\n      {' '}\n      {'\"'}\n      our\n      {'\"'}\n      ) operates the https://anymetrica.com\n      website (the\n      {'\"'}\n      Service\n      {'\"'}\n      ).\n    </p>\n\n    <p>\n      This page informs you of our policies regarding the collection, use, and disclosure of\n      personal\n      data when you use our Service and the choices you have associated with that data. Our Privacy\n      Policy for Anymetrica is created with the help of the\n      <a\n        href=\"https://www.freeprivacypolicy.com/\"\n      >\n        Free Privacy Policy website\n      </a>\n      .\n    </p>\n\n    <p>\n      We use your data to provide and improve the Service. By using the Service, you agree to the\n      collection and use of information in accordance with this policy. Unless otherwise defined in\n      this Privacy Policy, terms used in this Privacy Policy have the same meanings as in our Terms\n      and Conditions, accessible from https://anymetrica.com\n    </p>\n\n\n    <h2>Information Collection And Use</h2>\n\n    <p>\n      We collect several different types of information for various purposes to provide and improve\n      our Service to you.\n    </p>\n\n    <h3>Types of Data Collected</h3>\n\n    <h4>Personal Data</h4>\n\n    <p>\n      While using our Service, we may ask you to provide us with certain personally identifiable\n      information that can be used to contact or identify you (\n      {'\"'}\n      Personal Data\n      {'\"'}\n      ). Personally\n      identifiable information may include, but is not limited to:\n    </p>\n\n    <ul>\n      <li>Email address</li>\n      <li>First name and last name</li>\n      <li>Phone number</li>\n      <li>Address, State, Province, ZIP/Postal code, City</li>\n      <li>Cookies and Usage Data</li>\n    </ul>\n\n    <h4>Usage Data</h4>\n\n    <p>\n      We may also collect information how the Service is accessed and used (\n      {'\"'}\n      Usage Data\n      {'\"'}\n      ).\n      This Usage\n      Data may include information such as your computer\n      {'\\''}\ns Internet Protocol address (e.g. IP\n      address), browser type, browser version, the pages of our Service that you visit, the time and\n      date of your visit, the time spent on those pages, unique device identifiers and other\n      diagnostic data.\n    </p>\n\n    <h4>Tracking & Cookies Data</h4>\n    <p>\n      We use cookies and similar tracking technologies to track the activity on our Service and hold\n      certain information.\n    </p>\n    <p>\n      Cookies are files with small amount of data which may include an anonymous unique identifier.\n      Cookies are sent to your browser from a website and stored on your device. Tracking\n      technologies\n      also used are beacons, tags, and scripts to collect and track information and to improve and\n      analyze our Service.\n    </p>\n    <p>\n      You can instruct your browser to refuse all cookies or to indicate when a cookie is being\n      sent.\n      However, if you do not accept cookies, you may not be able to use some portions of our\n      Service.\n    </p>\n    <p>Examples of Cookies we use:</p>\n    <ul>\n      <li>\n        <strong>Session Cookies.</strong>\n        {' '}\n        We use Session Cookies to operate our Service.\n      </li>\n      <li>\n        <strong>Preference Cookies.</strong>\n        {' '}\n        We use Preference Cookies to remember your preferences\n        and various settings.\n      </li>\n      <li>\n        <strong>Security Cookies.</strong>\n        {' '}\n        We use Security Cookies for security purposes.\n      </li>\n    </ul>\n\n    <h2>Use of Data</h2>\n\n    <p>Anymetrica uses the collected data for various purposes:</p>\n    <ul>\n      <li>To provide and maintain the Service</li>\n      <li>To notify you about changes to our Service</li>\n      <li>\n        To allow you to participate in interactive features of our Service when you choose to do\n        so\n      </li>\n      <li>To provide customer care and support</li>\n      <li>To provide analysis or valuable information so that we can improve the Service</li>\n      <li>To monitor the usage of the Service</li>\n      <li>To detect, prevent and address technical issues</li>\n    </ul>\n\n    <h2>Transfer Of Data</h2>\n    <p>\n      Your information, including Personal Data, may be transferred to — and maintained on —\n      computers located outside of your state, province, country or other governmental jurisdiction\n      where the data protection laws may differ than those from your jurisdiction.\n    </p>\n    <p>\n      If you are located outside United States and choose to provide information to us, please note\n      that we transfer the data, including Personal Data, to United States and process it there.\n    </p>\n    <p>\n      Your consent to this Privacy Policy followed by your submission of such information represents\n      your agreement to that transfer.\n    </p>\n    <p>\n      Anymetrica will take all steps reasonably necessary to ensure that your data is treated\n      securely and in accordance with this Privacy Policy and no transfer of your Personal Data will\n      take place to an organization or a country unless there are adequate controls in place\n      including\n      the security of your data and other personal information.\n    </p>\n\n    <h2>Disclosure Of Data</h2>\n\n    <h3>Legal Requirements</h3>\n    <p>\n      Anymetrica may disclose your Personal Data in the good faith belief that such action is\n      necessary to:\n    </p>\n    <ul>\n      <li>To comply with a legal obligation</li>\n      <li>To protect and defend the rights or property of Anymetrica</li>\n      <li>To prevent or investigate possible wrongdoing in connection with the Service</li>\n      <li>To protect the personal safety of users of the Service or the public</li>\n      <li>To protect against legal liability</li>\n    </ul>\n\n    <h2>Security Of Data</h2>\n    <p>\n      The security of your data is important to us, but remember that no method of transmission over\n      the Internet, or method of electronic storage is 100% secure. While we strive to use\n      commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute\n      security.\n    </p>\n\n    <h2>Service Providers</h2>\n    <p>\n      We may employ third party companies and individuals to facilitate our Service (\n      {'\"'}\n      Service\n      Providers\n      {'\"'}\n      ), to provide the Service on our behalf, to perform Service-related services or to\n      assist us in analyzing how our Service is used.\n    </p>\n    <p>\n      These third parties have access to your Personal Data only to perform these tasks on our\n      behalf\n      and are obligated not to disclose or use it for any other purpose.\n    </p>\n\n\n    <h2>Links To Other Sites</h2>\n    <p>\n      Our Service may contain links to other sites that are not operated by us. If you click on a\n      third party link, you will be directed to that third party\n      {'\\''}\ns site. We strongly advise you\n      to\n      review the Privacy Policy of every site you visit.\n    </p>\n    <p>\n      We have no control over and assume no responsibility for the content, privacy policies or\n      practices of any third party sites or services.\n    </p>\n\n\n    <h2>\nChildren\n      {'\\''}\ns Privacy\n    </h2>\n    <p>\n      Our Service does not address anyone under the age of 18 (\n      {'\"'}\n      Children\n      {'\"'}\n      ).\n    </p>\n    <p>\n      We do not knowingly collect personally identifiable information from anyone under the age of\n      18. If you are a parent or guardian and you are aware that your Children has provided us with\n      Personal Data, please contact us. If we become aware that we have collected Personal Data from\n      children without verification of parental consent, we take steps to remove that information\n      from\n      our servers.\n    </p>\n\n\n    <h2>Changes To This Privacy Policy</h2>\n    <p>\n      We may update our Privacy Policy from time to time. We will notify you of any changes by\n      posting the new Privacy Policy on this page.\n    </p>\n    <p>\n      We will let you know via email and/or a prominent notice on our Service, prior to the change\n      becoming effective and update the\n      {'\"'}\n      effective date\n      {'\"'}\n      {' '}\n      at the top of this Privacy\n      Policy.\n    </p>\n    <p>\n      You are advised to review this Privacy Policy periodically for any changes. Changes to this\n      Privacy Policy are effective when they are posted on this page.\n    </p>\n\n\n    <h2>Contact Us</h2>\n    <p>If you have any questions about this Privacy Policy, please contact us:</p>\n    <ul>\n      <li>By email: info@anymetrica.com</li>\n      <li>By visiting this page on our website: https://anymetrica.com/privacy-policy</li>\n\n    </ul>\n  </div>\n);\n","/* @flow */\nimport React from 'react';\nimport { Icon, Layout, Menu, Spin } from 'antd';\nimport Backbone from 'backbone';\nimport { SessionToken } from 'anymetrica-api/dist/enums';\nimport { error } from 'anymetrica-utils';\nimport { getStored, resetStorage } from '../session';\nimport { DashboardPage } from './DashboardPage';\nimport { UsersPage } from './UsersPage';\nimport { AnonymousPage } from './AnonymousPage';\nimport { DevicesPage } from './DevicesPage';\nimport { GroupsPage } from './GroupsPage';\nimport { ProfilePage } from './ProfilePage';\nimport { SoundCapturePage } from './SoundCapturePage';\nimport { SoundRecordsPage } from './SoundRecordsPage';\nimport { registryClient } from '../client';\nimport { PrivacyPolicy } from './PrivacyPolicy';\n\nexport class BaseLayout extends React.Component {\n  constructor(props) {\n    super(props);\n    const that = this;\n    const AppRouter = Backbone.Router.extend({\n      routes: {\n        'home/dashboard': 'dashboard',\n        'home/users': 'users',\n        'home/groups': 'groups',\n        // 'home/organizations': 'organizations',\n        'home/devices': 'devices',\n        'home/profile': 'profile',\n        'home/records': 'records',\n        'home/capture': 'capture',\n        'home/sign-out': 'signOut',\n        '': 'signIn',\n        'sign-in': 'signIn',\n        'sign-in/:otp': 'signIn',\n        'sign-up': 'signUp',\n        'sign-up/:otp': 'signUp',\n        'privacy-policy': 'pp',\n      },\n      // anonymous: () => {\n      //     that.state.router.navigate('/sign-in', { trigger: true });\n      //   } else {\n      //     that.setState({ section: 'anonymous', tab: 'sign-in' });\n      //   }\n      // },\n      signIn: (otp) => {\n        that.setState({ section: 'anonymous', tab: 'sign-in', otp });\n      },\n      signUp: (otp) => {\n        that.setState({ section: 'anonymous', tab: 'sign-up', otp });\n      },\n      dashboard: () => {\n        if (that.checkAuth()) { that.setState({ section: 'dashboard' }); }\n      },\n      groups: () => {\n        if (that.checkAuth()) { that.setState({ section: 'groups' }); }\n      },\n      // organizations: () => {\n      //   if (that.checkAuth()) { that.setState({ section: 'organizations' }); }\n      // },\n      records: () => {\n        if (that.checkAuth()) { that.setState({ section: 'records' }); }\n      },\n      devices: () => {\n        if (that.checkAuth()) { that.setState({ section: 'devices' }); }\n      },\n      users: () => {\n        if (that.checkAuth()) { that.setState({ section: 'users' }); }\n      },\n      profile: () => {\n        if (that.checkAuth()) { that.setState({ section: 'profile' }); }\n      },\n      capture: () => {\n        if (that.checkAuth()) { that.setState({ section: 'capture' }); }\n      },\n      signOut: () => {\n        resetStorage();\n        that.setState({\n          session_token: null,\n          username: null,\n          namespace: null,\n        });\n        if (this.state.section !== 'anonymous') {\n          Backbone.history.navigate('/sign-in', { trigger: true });\n        }\n      },\n    });\n    const router = new AppRouter();\n    this.state = {\n      router,\n      section: null,\n      ...(getStored()),\n    };\n  }\n\n  componentWillMount(): void {\n    if (!Backbone.History.started) {\n      Backbone.history.start({ pushState: true, silent: false });\n    }\n  }\n\n  async checkAuth() {\n    const { router } = this.state;\n    const { session_token } = getStored();\n    try {\n      if (!session_token) {\n        // noinspection ExceptionCaughtLocallyJS\n        throw new Error('No session token');\n      }\n      // Check if session token is fine\n      const { entities } = await registryClient.Discover({\n        request: {\n          credential: {\n            session_token: {\n              session_token,\n            },\n          },\n          types: [SessionToken],\n        },\n      });\n      if ((!entities) || (entities.length === 0)) {\n        // noinspection ExceptionCaughtLocallyJS\n        throw new Error('Invalid session token');\n      }\n      this.setState(getStored());\n      return true;\n    } catch (e) {\n      error(e);\n      router.navigate('home/sign-out', { trigger: true });\n    }\n    return null;\n  }\n\n  render() {\n    if (!this.state.section) {\n      return (<Spin delay={500} />);\n    }\n    if (this.state.section === 'anonymous') {\n      return (<AnonymousPage {...this.state} />);\n    }\n    const { username, namespace, router, section } = this.state;\n    return (\n      <Layout>\n        <Layout.Sider\n          style={{ overflow: 'auto', height: '100vh', position: 'fixed', width: 200, left: 0 }}\n        >\n          <div className=\"logo\" />\n          <Menu theme=\"dark\" mode=\"inline\" selectedKeys={[section]}>\n            <Menu.Item\n              key=\"dashboard\"\n              label=\"Home\"\n              onClick={() => router.navigate('/home/dashboard', { trigger: true })}\n            >\n              <Icon type=\"radar-chart\" />\n              <span className=\"nav-text\">Home</span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"groups\"\n              label=\"Groups\"\n              onClick={() => router.navigate('/home/groups', { trigger: true })}\n            >\n              <Icon type=\"team\" />\n              <span className=\"nav-text\">Groups</span>\n            </Menu.Item>\n            {\n              /*\n              <Menu.Item\n                key=\"organizations\"\n                label=\"Organizations\"\n                onClick={() => router.navigate('/home/organizations', { trigger: true })}\n              >\n                <Icon type=\"team\" />\n                <span className=\"nav-text\">Organizations</span>\n              </Menu.Item>\n              */\n            }\n            <Menu.Item\n              key=\"devices\"\n              label=\"Devices\"\n              onClick={() => router.navigate('/home/devices', { trigger: true })}\n            >\n              <Icon type=\"qrcode\" />\n              <span className=\"nav-text\">Devices</span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"users\"\n              label=\"Users\"\n              onClick={() => router.navigate('/home/users', { trigger: true })}\n            >\n              <Icon type=\"user\" />\n              <span className=\"nav-text\">Users</span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"records\"\n              label=\"Media Records\"\n              onClick={() => router.navigate('/home/records', { trigger: true })}\n            >\n              <Icon type=\"sound\" />\n              <span className=\"nav-text\">Sound records</span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"capture\"\n              label=\"Sound Capture Test\"\n              onClick={() => router.navigate('/home/capture', { trigger: true })}\n            >\n              <Icon type=\"sound\" />\n              <span className=\"nav-text\">Sound capture test</span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"profile\"\n              label=\"Profile\"\n              onClick={() => router.navigate('/home/profile', { trigger: true })}\n            >\n              <Icon type=\"user\" />\n              <span className=\"nav-text\">\n                {(\n                  <span>\n                    <span style={{ marginRight: '0.5em' }} className=\"bold\">{username}</span>\n                    <span className=\"small fade\">{namespace}</span>\n                  </span>\n                ) || (<Icon type=\"loading\" />)}\n              </span>\n            </Menu.Item>\n            <Menu.Item\n              key=\"sign-out\"\n              label=\"Sign-Out\"\n              onClick={() => router.navigate('/home/sign-out', { trigger: true })}\n            >\n              <Icon type=\"logout\" />\n              <span className=\"nav-text\">Sign Out</span>\n            </Menu.Item>\n          </Menu>\n        </Layout.Sider>\n        <Layout style={{ marginLeft: 200 }}>\n          <Layout.Header title=\"Home\" style={{ padding: 0 }} />\n          {/* TODO: Dry ugly code below */}\n          <Layout.Content style={{ margin: '24px 16px 0', overflow: 'initial' }}>\n            {section === 'dashboard' ? (\n              <DashboardPage {...this.state} />) : null}\n\n            {section === 'groups' ? (\n              <GroupsPage {...this.state} />) : null}\n\n            {\n              /*  section === 'organizations' ? (\n                <OrganizationsPage {...this.state} />) : null\n                */\n            }\n\n            {section === 'devices' ? (\n              <DevicesPage {...this.state} />) : null}\n\n            {section === 'users' ? (\n              <UsersPage {...this.state} />) : null}\n\n            {section === 'records' ? (\n              <SoundRecordsPage {...this.state} />) : null}\n\n            {section === 'capture' ? (\n              <SoundCapturePage {...this.state} />) : null}\n\n            {section === 'profile' ? (\n              <ProfilePage {...this.state} />) : null}\n\n            {section === 'pp' ? (\n              <PrivacyPolicy {...this.state} />) : null}\n\n          </Layout.Content>\n        </Layout>\n      </Layout>\n    );\n  }\n}\n","/* @flow */\nimport React from 'react';\nimport * as Sentry from '@sentry/browser';\nimport { SENTRY_CONFIG } from '../constants';\n\nSentry.init(SENTRY_CONFIG);\n\nexport class ErrorsBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    this.setState({ error });\n    Sentry.withScope((scope) => {\n      Object.keys(errorInfo).forEach((key) => {\n        scope.setExtra(key, errorInfo[key]);\n      });\n      Sentry.captureException(error);\n    });\n  }\n\n  render() {\n    if (this.state.error) {\n      // render fallback UI\n      return (\n        <button type=\"button\" onClick={() => Sentry.showReportDialog()}>\n          Report feedback\n        </button>\n      );\n    }\n    // when there's not an error, render children untouched\n    return this.props.children;\n  }\n}\n","/* @flow */\nimport 'antd/dist/antd.css'; // or 'antd/dist/antd.less'\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BaseLayout } from './views/BaseLayout';\nimport { ErrorsBoundary } from './components/ErrorsBoundary';\n\ntype StateType = {\n  redirectLocation: { pathname: string },\n  redirectToReferrer: string,\n  message: {\n    type: 'info' | 'message' | 'error' | 'warning',\n    text: ?string,\n  }\n}\n\nexport type PropsType = {}\n\nclass Index extends React.Component<PropsType, StateType> {\n  render() {\n    return (\n      <ErrorsBoundary>\n        <BaseLayout {...this.state} />\n      </ErrorsBoundary>\n    );\n  }\n}\n\nReactDOM.render(<Index />, document.getElementById('root'));\n","/* @flow */\nimport { message } from 'antd';\nimport { promiseMap } from 'anymetrica-utils/lib/utils/promise';\nimport RegistryGRPCClient from 'anymetrica-api/dist/registry';\nimport BackBone from 'backbone';\nimport { ENTITY_TYPE_TO_PLURAL } from 'anymetrica-api/dist/entity';\nimport { getStored } from './session';\n\nexport const c = RegistryGRPCClient({ host: window.location.hostname, port: window.location.port });\nconst defaultOptions = { discoverFrom: false, discoverTo: true };\n\nconst wrapQuery = (fn, methodName) => async (\n  params,\n  options: { discoverFrom: boolean, discoverTo: boolean },\n) => {\n  const { discoverFrom, discoverTo } = { ...defaultOptions, ...(options || {}) };\n  const { session_token } = getStored();\n  const credential = {\n    ...(session_token ? { session_token: { session_token } } : {}),\n    ...((params.request || { request: { credential: {} } }).credential),\n  };\n  try {\n    const result = await fn({\n      ...params,\n      request: { ...(params.request || {}), credential },\n    });\n    const e = result.error;\n    if (e) {\n      // eslint-disable-next-line no-console\n      console.error(e);\n      message.error(`Authentication error: ${e.message || e.details}`);\n      if (\n        (e && parseInt(e.code, 10) === 16)\n        || (e.message || e.details || '').match(/16/g)\n      ) {\n        if (BackBone.history.getFragment().match(/^home/ig)) {\n          BackBone.history.navigate('/home/sign-out', { trigger: true });\n        }\n        return { error: e };\n      }\n    }\n    result.entities = result.entities || [];\n    result.relations = result.relations || [];\n    // Auto-resolve\n    if ((methodName === 'Discover') && (discoverFrom || discoverTo)) {\n      const entitiesDict = {};\n      const entitiesMetaDataDict = {};\n      result.entities.forEach(\n        (entity) => { entitiesMetaDataDict[entity.id] = entity; },\n      );\n      result.relations.forEach((rel) => {\n        if (discoverFrom) { entitiesDict[rel.from_id] = entitiesMetaDataDict[rel.from_id]; }\n        if (discoverTo) { entitiesDict[rel.to_id] = entitiesMetaDataDict[rel.to_id]; }\n      });\n      const entitiesByType = {};\n      Object.values(entitiesDict).sort().forEach(({ id, metadata: { type } }) => {\n        entitiesByType[type] = entitiesByType[type] || {};\n        entitiesByType[type][id] = entitiesDict[id];\n      });\n      const entities = [];\n      await promiseMap(\n        Object.keys(entitiesByType).sort(),\n        async (type) => {\n          const getterName = `Get${ENTITY_TYPE_TO_PLURAL[type]}`;\n          const ids = Object.keys(entitiesByType[type]).sort();\n          (await c.RegistryService[getterName]({\n            ids,\n            request: { credential },\n          })).entities.forEach((entity) => {\n            entitiesDict[entity.id] = entity;\n            entities.push(entity);\n          });\n        },\n      );\n      return {\n        ...result,\n        entities: entities.map(entity => entitiesDict[entity.id] || entity),\n        relations: result.relations.map(r => ({\n          ...r,\n          from: (\n            discoverFrom\n              ? entitiesDict[r.from_id]\n              : entitiesMetaDataDict[r.from_id]\n          ) || { id: r.from_id, metadata: {} },\n          to: (\n            discoverTo\n              ? entitiesDict[r.to_id]\n              : entitiesMetaDataDict[r.to_id]\n          ) || { id: r.to_id, metadata: {} },\n        })),\n      };\n    }\n    return result;\n  } catch (e) {\n    // eslint-disable-next-line no-console\n    console.error('Server-side error:', e);\n    if (e && (e.message || e.details || '').match(/16/g)) {\n      this.props.router.navigate('/home/sign-out', { trigger: true });\n    } else {\n      throw e;\n    }\n  }\n  return null;\n};\n\n\nObject.keys(c).forEach(sk => Object.keys(c[sk]).forEach((methodName) => {\n  c[sk][methodName] = wrapQuery(c[sk][methodName], methodName.toString());\n}));\n\nexport const registryClient = c.RegistryService;\n","/* eslint-disable */\n/* @flow */\nimport React from 'react';\nimport { isEmpty, ms2obj, MS_IN_SECOND, obj2ms, obj2seconds } from 'anymetrica-utils';\nimport { EntityType } from 'anymetrica-api/dist/enums';\nimport { Button, Icon, Slider } from 'antd';\nimport Regions from 'wavesurfer.js/dist/plugin/wavesurfer.regions';\nimport MiniMap from 'wavesurfer.js/dist/plugin/wavesurfer.minimap';\nimport WaveSurfer from 'wavesurfer.js';\nimport { registryClient } from '../client';\n// import REGIONS from './seg-raw.json'\n\n\nexport const MINIMAP_HEIGHT_PX = 32;\nexport const TIMELINE_HEIGHT_PX = 64;\nexport const MIN_ZOOM_LVL = 1;\nexport const DEFAULT_ZOOM = MIN_ZOOM_LVL;\nexport const MAX_ZOOM_LVL = 256;\nexport const ZOOM_DEBOUNCE_MS = 1024;\nexport const SKIP_STEP_MS = 200;\n\nexport type PropsType = {\n  isActive: boolean,\n  record: Object,\n  activateHandler?: ?(e)=>void,\n  style?: ?Object,\n};\n\n\nconst getSliderParams = (zoom, onChange, onAfterChange) => {\n  const zoomValue = Math.floor(Math.log2(zoom));\n  const slider = {\n    included: false,\n    style: {\n      // height: height + miniMapHeight,\n      height: '70%',\n      marginLeft: '2em',\n      marginRight: '.5em',\n      marginTop: '1em',\n      marginBottom: 0,\n      userSelect: 'none'\n    },\n    marks: {},\n    step: 1,\n    dots: false,\n    min: Math.floor(Math.log2(MIN_ZOOM_LVL)),\n    max: Math.floor(Math.log2(MAX_ZOOM_LVL)),\n    value: zoomValue,\n    onChange: (v) => onChange(Math.pow(2, parseInt(v, 10))),\n    onAfterChange: (v) => onAfterChange(Math.pow(2, parseInt(v, 10))),\n    tipFormatter: (value) => `x${Math.pow(2, value)}`,\n  };\n  for (let i = slider.min; i <= slider.max; i += 1) {\n    const val = Math.pow(2, i);\n    const isEdgeLabel = [slider.min, slider.max].indexOf(i) !== -1;\n    const isCurrentLabel = i === zoomValue;\n    if (isEdgeLabel || isCurrentLabel || (i % 2 === 0)) {\n      slider.marks[i] = {\n        label: `x ${val}`,\n        style: {\n          fontSize: (isEdgeLabel || isCurrentLabel) ? '.75em' : '.3em',\n          color: isCurrentLabel ? '#2196F3' : '#616161'\n        }\n      };\n    }\n  }\n  return slider;\n};\n\n\nconst BASIC_WAVESURFER_CONFIG = {\n  zoomDebounce: ZOOM_DEBOUNCE_MS,\n  container: null,\n  waveColor: '#eb9775',\n  height: 64,\n  hideScrollbar: false,\n  progressColor: '#EC622B',\n  cursorWidth: 2,\n  barWidth: 1,\n  barGap: 1,\n  cursorColor: '#9E9E9E',\n  removeMediaElementOnDestroy: true,\n  autoCenter: true,\n  partialRender: true,\n  fillParent: true,\n  scrollParent: false,\n  plugins: []\n};\n\nexport class VoiceTimeline extends React.Component<PropsType> {\n  static defaultProps = {\n    activateHandler: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      zoom: DEFAULT_ZOOM,\n      events: [],\n      error: null,\n      isLoading: true,\n      isPlaying: false,\n      canPlayPause: false,\n    };\n  }\n\n  onKeyDown(e) {\n    if (this.props.isActive) {\n      if (e.keyCode === 32) {\n        e.stopPropagation();\n        e.preventDefault();\n        this.toggle();\n      } else if (e.keyCode === 37) {\n        e.stopPropagation();\n        e.preventDefault();\n        this.wavesurfer.skipBackward(SKIP_STEP_MS / MS_IN_SECOND);\n      } else if (e.keyCode === 39) {\n        e.stopPropagation();\n        e.preventDefault();\n        this.wavesurfer.skipForward(SKIP_STEP_MS / MS_IN_SECOND);\n      }\n    }\n  }\n\n  componentDidMount(): void {\n    Promise.all([this.loadVadEvents()])\n      .then(() => {})\n      .catch(e => this.setState({\n        error: e.message || e.details,\n        isLoading: false,\n      }));\n    this.currentOnKeyDownFn = (e) => this.onKeyDown(e);\n    document.addEventListener('keydown', this.currentOnKeyDownFn);\n  }\n\n  componentWillUnmount(): void {\n    document.removeEventListener('keydown', this.currentOnKeyDownFn);\n  }\n\n  async loadVadEvents() {\n    this.state = { error: null, isLoading: true };\n    if (this.props.record.id) {\n      const vadResults = await registryClient.Discover({\n        request: {\n          types: [EntityType.VadResult],\n          traverse_depth: 2,\n        },\n        ids: [this.props.record.id],\n      });\n      const events = (!isEmpty(vadResults.entities)) ? vadResults.entities[0].events : [];\n      const result = {\n        events,\n        isLoading: false,\n        waveform: null,\n      };\n      this.setState(result);\n    } else {\n      this.setState({\n        error: 'Record entity do not have ID',\n        isLoading: false,\n        spectrogram: null,\n        waveform: null,\n      });\n    }\n    return null;\n  }\n\n  componentWillReceiveProps(nextProps: PropsType, nextContext: any): void {\n    if ((!nextProps.isActive) && this.props.isActive) {\n      if (this.wavesurfer && this.wavesurfer.isPlaying()) {\n        this.wavesurfer.pause();\n      }\n    }\n    return nextProps;\n  }\n\n  zoom(zoom) {\n    if (this.wavesurfer) {\n      if (!this.wavesurfer.params.scrollParent) {\n        this.wavesurfer.toggleScroll();\n      }\n      if (this.wavesurfer.params.minPxPerSec !== zoom) {\n        this.setState({ zoom });\n        this.wavesurfer.zoom(zoom);\n      }\n    }\n  }\n\n  toggle(e) {\n    const { canPlayPause } = this.state;\n    const { activateHandler } = this.props;\n    if (e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    if (canPlayPause) {\n      if (activateHandler) {\n        activateHandler();\n      }\n      this.setState({ canPlayPause: false });\n      this.wavesurfer.playPause();\n    }\n  }\n\n  render() {\n    const { events, error, isLoading, canPlayPause, isPlaying, zoom } = this.state;\n    // noinspection JSUnusedLocalSymbols\n    const { record, isActive, activateHandler, style, ...otherProps } = this.props;\n\n    const height = Math.ceil((TIMELINE_HEIGHT_PX - 1) / 8) * 8 + 1;\n    const miniMapHeight = Math.ceil(MINIMAP_HEIGHT_PX / 8) * 8;\n\n    let contentOverlay = null;\n    let content = null;\n    if (isLoading) {\n      content = (<div className=\"loading\"><Icon type=\"loading\" /></div>);\n    } else if (isEmpty(events)) {\n      content = (<div className=\"missing\">No voice events data</div>);\n    } else if (error) {\n      content = (<div className=\"error\">{error}</div>);\n    } else {\n      const regions = events.map(r => ({\n        start: r.start || (obj2seconds(r.start_ts) - obj2seconds(record.media_start_ts)),\n        end: r.end || (obj2seconds(e.end_ts) - obj2seconds(record.media_start_ts)),\n        drag: false,\n        resize: false,\n        loop: false,\n        ...r,\n      }));\n      const domId = `view-${record.id}`;\n      contentOverlay = (<div\n        color=\"#2196F3\"\n        id={domId}\n        ref={() => {\n          if (!this.wavesurfer) {\n            window.setTimeout(() => {\n\n              this.wavesurfer = WaveSurfer.create({\n                ...BASIC_WAVESURFER_CONFIG,\n                height,\n                container: `#${domId}`,\n                plugins: [\n                  Regions.create({\n                    regions,\n                    dragSelection: false,\n                    // deferInit: true,\n                  }),\n                  MiniMap.create({\n                    waveColor: 'grey',\n                    progressColor: 'black',\n                    height: miniMapHeight,\n                  })\n                ]\n              });\n              const audioBlob = new Blob(\n                [Buffer.from(record.content.data)],\n                { type: `${record.content_type}/${record.media_type}` },\n              );\n              this.wavesurfer.disableDragSelection();\n              this.wavesurfer.on(\n                'ready',\n                () => {\n                  this.setState({\n                    canPlayPause: true,\n                    zoom: Math.ceil(this.wavesurfer.pixelRatio),\n                  });\n                }\n              );\n              this.wavesurfer.on(\n                'play',\n                () => {\n                  this.updateInterval = window.setInterval(() => {\n                    this.setState({ progress: this.wavesurfer.getCurrentTime() });\n                  }, 128);\n                  this.setState({\n                    isPlaying: true,\n                    canPlayPause: true,\n                  });\n                }\n              );\n              this.wavesurfer.on(\n                'seek',\n                () => {\n                  if (!this.wavesurfer.isPlaying()) {\n                    this.wavesurfer.play();\n                  }\n                }\n              );\n              this.wavesurfer.on(\n                'pause',\n                () => {\n                  window.clearInterval(this.updateInterval);\n                  this.setState({\n                    isPlaying: false,\n                    canPlayPause: true,\n                  });\n                }\n              );\n              this.wavesurfer.on(\n                'finish',\n                () => {\n                  window.clearInterval(this.updateInterval);\n                  this.setState({\n                    isPlaying: false,\n                    canPlayPause: true,\n                  });\n                }\n              );\n              this.wavesurfer.loadBlob(audioBlob);\n              this.setState({ canPlayPause: true });\n            }, 100);\n          }\n        }}\n      />);\n    }\n\n\n    const icon = isPlaying ? 'pause' : 'caret-right';\n    return (<div\n      style={{ height: miniMapHeight + height, ...(style || {}) }}\n      className={`voice-timeline-cell ${isActive ? 'active' : ''}`}\n      {...otherProps}\n    >\n      <div className=\"voice-timeline-button\">\n        <Button\n          icon={icon}\n          onClick={(e) => this.toggle(e)}\n          shape=\"circle\"\n          type={isActive ? 'primary' : 'default'}\n          htmlType=\"button\"\n          disabled={!canPlayPause}\n        />\n      </div>\n      <div className=\"voice-timeline\">\n        {content}\n        <div id=\"minimap\" style={{ height: MINIMAP_HEIGHT_PX }} onChange={(e) => this.zoom(e)} />\n        {contentOverlay}\n      </div>\n      <div>\n        <Slider\n          vertical\n          disabled={!canPlayPause}\n          {...getSliderParams(zoom, newZoom => this.setState({ zoom: newZoom }), () => this.zoom(zoom))}\n        />\n      </div>\n    </div>);\n  }\n}\n","/* @flow */\nimport { message } from 'antd';\nimport BackBone from 'backbone';\nimport { SessionToken } from 'anymetrica-api/dist/enums';\nimport { registryClient } from './client';\n\n/**\n * Is any kind of Browser local storage available\n *\n * @param type\n * @returns {boolean}\n */\nexport const isStorageAvailable = (type) => {\n  let storage;\n  try {\n    // eslint-disable-next-line no-undef\n    storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (e) {\n    return e instanceof window.DOMException && (// everything except Firefox\n      e.code === 22\n      // Firefox\n      || e.code === 1014\n      // test name field too, because code might not be present\n      // everything except Firefox\n      || e.name === 'QuotaExceededError'\n      // Firefox\n      || e.name === 'NS_ERROR_DOM_QUOTA_REACHED'\n    ) && (\n      // acknowledge QuotaExceededError only if there's something already stored\n      storage.length !== 0\n    );\n  }\n};\n\n/**\n * Get browser local storage\n *\n * @param preferSessionStorage\n * @param enableFallback\n * @returns {Storage}\n */\nexport const getStorage = (preferSessionStorage = false, enableFallback = true) => {\n  if (preferSessionStorage) {\n    if (isStorageAvailable('sessionStorage')) {\n      return window.sessionStorage;\n    }\n    // eslint-disable-next-line no-console\n    console.warn('No sessionStorage available, trying to use localStorage instead');\n    if (enableFallback && isStorageAvailable('localStorage')) {\n      return window.localStorage;\n    }\n  }\n  if (isStorageAvailable('localStorage')) {\n    return window.localStorage;\n  }\n  // eslint-disable-next-line no-console\n  console.warn('No localStorage available, trying to use sessionStorage instead');\n  if (enableFallback && isStorageAvailable('sessionStorage')) {\n    return window.sessionStorage;\n  }\n\n  throw new Error('No localStorage or sessionStorage are available or fall-backs are not allowed');\n};\n\nexport const STORAGE = getStorage();\n\nexport const getStored = () => ({\n  session_token: STORAGE.getItem('session_token') || STORAGE.getItem('token'),\n  token: STORAGE.getItem('token') || STORAGE.getItem('session_token'),\n  username: STORAGE.getItem('username'),\n  namespace: STORAGE.getItem('namespace'),\n});\n\n/**\n * Browser-level storage\n */\ntype UserCtxType = { username?: ?string, password?: ?string, namespace?: ?string, token?: ?string };\nexport const signIn = async (params: UserCtxType): Promise<UserCtxType> => {\n  const { username, password, namespace } = params;\n\n  const discoverResult = await registryClient.Discover({\n    request: {\n      credential: {\n        username_password: {\n          password,\n          username,\n          // TODO: Enable namespaces\n          // namespace,\n        },\n      },\n    },\n    types: [SessionToken],\n  });\n\n  if (discoverResult.error) {\n    message.error(discoverResult.error.details);\n    return { ...params };\n  }\n  const discoverIds = (discoverResult.entities || []).map(({ id }) => id);\n  const credentialEntities = await registryClient.GetSessionTokens({\n    ids: discoverIds,\n    request: {\n      credential: {\n        username_password: {\n          password,\n          username,\n          // TODO: Enable namespaces\n          namespace,\n        },\n      },\n    },\n  });\n  if (credentialEntities.entities.length > 0) {\n    const currentCredential = credentialEntities.entities[0];\n    STORAGE.setItem('username', username);\n    STORAGE.setItem('namespace', namespace || currentCredential.namespace || '');\n    STORAGE.setItem('token', currentCredential.session_token || currentCredential.token);\n    STORAGE.setItem('session_token', currentCredential.session_token || currentCredential.token);\n    BackBone.history.navigate('/home/dashboard', { trigger: true });\n  } else {\n    throw new Error('No session ID was returned!');\n  }\n  return null;\n};\n\nexport const resetStorage = () => {\n  STORAGE.removeItem('username');\n  STORAGE.removeItem('namespace');\n  STORAGE.removeItem('password');\n  STORAGE.removeItem('token'); // deprecated\n  STORAGE.removeItem('session_token');\n};\n"],"sourceRoot":""}